{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?7e02","webpack:///./src/App.vue?9afc","webpack:///./src/components/GroupPane.vue?ce45","webpack:///./src/components/GroupModal.vue?6874","webpack:///src/components/GroupModal.vue","webpack:///./src/components/GroupModal.vue?6483","webpack:///./src/components/GroupModal.vue","webpack:///src/components/GroupPane.vue","webpack:///./src/components/GroupPane.vue?ac0d","webpack:///./src/components/GroupPane.vue","webpack:///./src/components/PersonPane.vue?8056","webpack:///./src/components/PersonModal.vue?6240","webpack:///src/components/PersonModal.vue","webpack:///./src/components/PersonModal.vue?5d7d","webpack:///./src/components/PersonModal.vue","webpack:///src/components/PersonPane.vue","webpack:///./src/components/PersonPane.vue?b1a3","webpack:///./src/components/PersonPane.vue","webpack:///./src/components/ConstraintPane.vue?59ce","webpack:///./src/components/ConstraintModal.vue?5d52","webpack:///src/components/ConstraintModal.vue","webpack:///./src/components/ConstraintModal.vue?eb54","webpack:///./src/components/ConstraintModal.vue","webpack:///src/components/ConstraintPane.vue","webpack:///./src/components/ConstraintPane.vue?b3fd","webpack:///./src/components/ConstraintPane.vue","webpack:///./src/components/EntryPane.vue?e49b","webpack:///./src/components/EntryModal.vue?5a75","webpack:///src/components/EntryModal.vue","webpack:///./src/components/EntryModal.vue?c9e9","webpack:///./src/components/EntryModal.vue","webpack:///./src/components/SaveEntryModal.vue?e6e3","webpack:///src/components/SaveEntryModal.vue","webpack:///./src/components/SaveEntryModal.vue?5b43","webpack:///./src/components/SaveEntryModal.vue","webpack:///../memomixts/util.ts","webpack:///../memomixts/EntryGenerator.ts","webpack:///../memomixts/MemoMix.ts","webpack:///src/components/EntryPane.vue","webpack:///./src/components/EntryPane.vue?665c","webpack:///./src/components/EntryPane.vue","webpack:///./src/components/HistoryPane.vue?ba68","webpack:///src/components/HistoryPane.vue","webpack:///./src/components/HistoryPane.vue?cfaa","webpack:///./src/components/HistoryPane.vue","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","attrs","groups","on","updateGroup","addGroup","removeGroup","persons","updatePerson","addPerson","removePerson","constraints","updateConstraint","addConstraint","removeConstraint","history","removeEntry","saveEntry","staticRenderFns","activeGroup","group","updateHistory","activeIndex","model","callback","$$v","showGroupModal","expression","_v","directives","rawName","hover","addGroupBtnHover","class","$event","openGroupModal","groupFields","_","index","groupRowHoverIndex","scopedSlots","_u","fn","updateGroupBtnHover","modalTitle","reinitGroupModal","e","preventDefault","groupIdConflict","newGroup","$set","trim","_n","isCreationModal","_e","proxy","checkGroup","components","BModal","BIconXCircle","props","type","Boolean","required","oldGroup","Array","generateNewGroup","methods","groupId","size","$emit","validGroup","computed","set","newVal","undefined","existingGroup","oldGroupId","existingGroupId","component","BTable","BIconPlusCircle","GroupModal","activePerson","person","showPersonModal","addPersonBtnHover","openPersonModal","personFields","personRowHoverIndex","updatePersonBtnHover","reinitPersonModal","personIdConflict","newPerson","checkPerson","oldPerson","generateNewPerson","validPerson","existingPerson","oldPersonId","existingPersonId","PersonModal","activeConstraint","constraint","showConstraintModal","addConstraintBtnHover","openConstraintModal","constraintFields","constraintRowHoverIndex","_s","constraintTypes","item","map","personId","join","updateConstraintBtnHover","reinitConstraintModal","typeOptions","newConstraint","personOptions","reinitSelectPerson","removePersonBtnHover","groupOptions","forbiddenGroups","mandatoryGroup","reinitSelectGroup","removeGroupBtnHover","checkConstraint","oldConstraint","generateNewConstraint","generatePersonOptions","generateGroupOptions","text","options","validContraint","watch","ConstraintModal","apart","together","removeConstraintHover","deep","handler","remainingPersons","activeEntryGroup","updateEntryGroup","showEntryModal","showSaveEntryModal","entry","saveEntryBtnHover","generateEntryBtnHover","generateEntry","entryFields","entryGroupRowHoverIndex","updateEntryGroupBtnHover","openEntryModal","reinitEntryModal","newEntryGroup","checkEntryGroup","oldEntryGroup","generateNewEntryGroup","newRemainingPersons","validEntryGroup","entryTitle","BIconCheckCircle","a","EntryModal","title","entryGroup","_m","_l","removeEntryBtnHover","activeEntry","getGroupsKey","project","storageKeyPrefix","getPersonsKey","getConstraintsKey","getHistoryKey","getCurrentProjectKey","getProjectsKey","Splitpanes","GroupPane","currentProject","projects","mounted","localStorage","getItem","defaultProject","setItem","JSON","stringify","saveGroups","savePersons","saveConstraints","saveHistory","switchProject","parse","Vue","directive","VBHover","VBToggle","el","render","h","App"],"mappings":"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","file":"js/index.2832c54a.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"index\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/memomix/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('splitpanes',{staticClass:\"default-theme\",staticStyle:{\"height\":\"100vh\"},attrs:{\"horizontal\":\"\"}},[_c('pane',{staticClass:\"horizontalPane\"},[_c('splitpanes',{attrs:{\"vertical\":\"\"}},[_c('pane',[_c('group-pane',{attrs:{\"groups\":_vm.groups},on:{\"group-to-update\":_vm.updateGroup,\"group-to-add\":_vm.addGroup,\"group-to-remove\":_vm.removeGroup}})],1),_c('pane',[_c('person-pane',{attrs:{\"persons\":_vm.persons},on:{\"person-to-update\":_vm.updatePerson,\"person-to-add\":_vm.addPerson,\"person-to-remove\":_vm.removePerson}})],1),_c('pane',[_c('constraint-pane',{attrs:{\"constraints\":_vm.constraints,\"persons\":_vm.persons,\"groups\":_vm.groups},on:{\"constraint-to-update\":_vm.updateConstraint,\"constraint-to-add\":_vm.addConstraint,\"constraint-to-remove\":_vm.removeConstraint}})],1)],1)],1),_c('pane',{staticClass:\"horizontalPane\"},[_c('splitpanes',[_c('pane',[_c('history-pane',{attrs:{\"history\":_vm.history},on:{\"entry-to-remove\":_vm.removeEntry}})],1),_c('pane',[_c('entry-pane',{attrs:{\"groups\":_vm.groups,\"persons\":_vm.persons,\"constraints\":_vm.constraints,\"history\":_vm.history},on:{\"entry-to-save\":_vm.saveEntry}})],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('group-modal',{attrs:{\"old-group\":_vm.activeGroup,\"groups\":_vm.groups},on:{\"group-to-update\":function (group, updateHistory) { return _vm.updateGroup(_vm.activeIndex, group, updateHistory); },\"group-to-add\":function (group) { return _vm.addGroup(group); },\"group-to-remove\":function () { return _vm.removeGroup(_vm.activeIndex); }},model:{value:(_vm.showGroupModal),callback:function ($$v) {_vm.showGroupModal=$$v},expression:\"showGroupModal\"}}),_c('div',{staticClass:\"sticky-top bg-light d-inline-block w-100\"},[_c('span',{staticClass:\"float-left h5\"},[_vm._v(\"Groupes\")]),_c('span',{staticClass:\"float-right\"},[_c('button',{directives:[{name:\"b-hover\",rawName:\"v-b-hover\",value:(function (hover) { return _vm.addGroupBtnHover = hover; }),expression:\"hover => addGroupBtnHover = hover\"}],class:'btn btn-link btn-sm ' + (_vm.addGroupBtnHover ? 'text-success' : 'text-body'),on:{\"click\":function($event){return _vm.openGroupModal(-1)}}},[_vm._v(\" Nouveau groupe \"),_c('b-icon-plus-circle')],1)])]),_c('b-table',{attrs:{\"small\":\"\",\"striped\":\"\",\"hover\":\"\",\"fields\":_vm.groupFields,\"items\":_vm.groups},on:{\"row-hovered\":function (_, index) { return _vm.groupRowHoverIndex = index; },\"row-unhovered\":function (_, index) { return _vm.groupRowHoverIndex = -1; }},scopedSlots:_vm._u([{key:\"cell(updateBtn)\",fn:function(data){return [_c('div',{staticClass:\"float-right\"},[_c('button',{directives:[{name:\"b-hover\",rawName:\"v-b-hover\",value:(function (hover) { return _vm.updateGroupBtnHover = hover; }),expression:\"hover => updateGroupBtnHover = hover\"}],class:'btn btn-link btn-sm' +\n            (_vm.updateGroupBtnHover ? ' text-success' : ' text-body') +\n            (_vm.groupRowHoverIndex == data.index ? ' visible' : ' invisible'),on:{\"click\":function($event){return _vm.openGroupModal(data.index)}}},[_c('b-icon-pencil')],1)])]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-modal',{attrs:{\"title\":_vm.modalTitle},on:{\"show\":_vm.reinitGroupModal,\"hide\":_vm.reinitGroupModal},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('b-form',{attrs:{\"novalidate\":\"\"},on:{\"submit\":function (e) { return e.preventDefault(); }}},[_c('b-form-group',{attrs:{\"label\":\"Identifiant du groupe\",\"label-for\":\"groupId\"}},[_c('b-form-input',{attrs:{\"type\":\"text\",\"state\":_vm.groupIdConflict ? false : null,\"required\":\"\",\"maxlength\":\"32\",\"placeholder\":\"Identifiant du groupe (e.g. nom d'une tâche) \"},model:{value:(_vm.newGroup.groupId),callback:function ($$v) {_vm.$set(_vm.newGroup, \"groupId\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"newGroup.groupId\"}}),_c('div',{staticClass:\"invalid-feedback\"},[_vm._v(\" Le groupe existe déjà. \")])],1),_c('b-form-group',{attrs:{\"label\":\"Taille du groupe\",\"label-for\":\"size\"}},[_c('b-form-input',{attrs:{\"type\":\"number\",\"required\":\"\"},model:{value:(_vm.newGroup.size),callback:function ($$v) {_vm.$set(_vm.newGroup, \"size\", _vm._n($$v))},expression:\"newGroup.size\"}})],1),(!_vm.isCreationModal)?_c('b-form-checkbox',{attrs:{\"switch\":\"\"},model:{value:(_vm.updateHistory),callback:function ($$v) {_vm.updateHistory=$$v},expression:\"updateHistory\"}},[_vm._v(\" Modifier les occurrences du groupe dans l'historique \")]):_vm._e()],1)]},proxy:true},{key:\"modal-footer\",fn:function(){return [_c('b-button',{attrs:{\"variant\":\"success\"},on:{\"click\":_vm.checkGroup}},[_vm._v(\" Valider \"),_c('b-icon-check-circle')],1),(!_vm.isCreationModal)?_c('b-button',{attrs:{\"variant\":\"danger\"},on:{\"click\":_vm.removeGroup}},[_vm._v(\" Supprimer \"),_c('b-icon-x-circle')],1):_vm._e()]},proxy:true}]),model:{value:(_vm.showGroupModal),callback:function ($$v) {_vm.showGroupModal=$$v},expression:\"showGroupModal\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <b-modal v-model=\"showGroupModal\" :title=\"modalTitle\"\r\n      @show=\"reinitGroupModal\" @hide=\"reinitGroupModal\"\r\n    >\r\n      <template #default>\r\n        <b-form novalidate @submit=\"e => e.preventDefault()\">\r\n          <b-form-group label=\"Identifiant du groupe\" label-for=\"groupId\">\r\n            <b-form-input type=\"text\" v-model.trim=\"newGroup.groupId\"\r\n              :state=\"groupIdConflict ? false : null\" required maxlength=\"32\"\r\n              placeholder=\"Identifiant du groupe (e.g. nom d'une tâche) \"\r\n            />\r\n            <div class=\"invalid-feedback\">\r\n              Le groupe existe déjà.\r\n            </div>\r\n          </b-form-group>\r\n          <b-form-group label=\"Taille du groupe\" label-for=\"size\">\r\n            <b-form-input type=\"number\" v-model.number=\"newGroup.size\" required />\r\n          </b-form-group>\r\n          <b-form-checkbox v-model=\"updateHistory\" v-if=\"!isCreationModal\" switch>\r\n            Modifier les occurrences du groupe dans l'historique\r\n          </b-form-checkbox>\r\n        </b-form>\r\n      </template>\r\n\r\n      <template #modal-footer>\r\n        <b-button variant=\"success\" @click=\"checkGroup\">\r\n          Valider\r\n          <b-icon-check-circle/>\r\n        </b-button>\r\n        <b-button @click=\"removeGroup\" variant=\"danger\" v-if=\"!isCreationModal\">\r\n          Supprimer\r\n          <b-icon-x-circle/>\r\n        </b-button>\r\n      </template>\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  BModal, BButton, BForm, BFormGroup, BFormInput, BFormCheckbox,\r\n  BIconXCircle, BIconCheckCircle\r\n} from \"bootstrap-vue\";\r\n\r\nexport default {\r\n  name: 'GroupModal',\r\n  components: {\r\n    BModal, BButton, BForm, BFormGroup, BFormInput, BFormCheckbox,\r\n    BIconXCircle, BIconCheckCircle\r\n  },\r\n  props: {\r\n    value: {\r\n      type: Boolean,\r\n      required: true\r\n    },\r\n    oldGroup: {\r\n      type: Object\r\n    },\r\n    groups: {\r\n      type: Array,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      newGroup: this.generateNewGroup(),\r\n      updateHistory: true\r\n    };\r\n  },\r\n  methods: {\r\n    generateNewGroup() {\r\n      if (!this.oldGroup)\r\n        return {\r\n          groupId: '',\r\n          size: 1,\r\n        };\r\n      return {\r\n        groupId: this.oldGroup.groupId,\r\n        size: this.oldGroup.size,\r\n      };\r\n    },\r\n    reinitGroupModal() {\r\n      this.newGroup = this.generateNewGroup();\r\n      this.updateHistory = true;\r\n    },\r\n    updateGroup() {\r\n      this.$emit('group-to-update', this.newGroup, this.updateHistory);\r\n      this.showGroupModal = false;\r\n    },\r\n    addGroup() {\r\n      this.$emit('group-to-add', this.newGroup);\r\n      this.showGroupModal = false;\r\n    },\r\n    removeGroup() {\r\n      this.$emit('group-to-remove');\r\n      this.showGroupModal = false;\r\n    },\r\n    checkGroup() {\r\n      let validGroup = !this.groupIdConflict && this.newGroup.groupId.length >= 1;\r\n      if (validGroup) {\r\n        if (this.isCreationModal)\r\n          this.addGroup();\r\n        else this.updateGroup();\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    showGroupModal: {\r\n      get() {\r\n        return this.value;\r\n      },\r\n      set(newVal) {\r\n        return this.$emit('input', newVal);\r\n      }\r\n    },\r\n    isCreationModal() {\r\n      return this.oldGroup == null;\r\n    },\r\n    modalTitle() {\r\n      if (this.isCreationModal)\r\n        return \"Ajouter un groupe\";\r\n      return \"Modifier le groupe\";\r\n    },\r\n    groupIdConflict() {\r\n      let existingGroup = this.groups.find(group => group.groupId == this.newGroup.groupId);\r\n      if (existingGroup == undefined)\r\n        return false;\r\n      if (this.isCreationModal)\r\n        return true;\r\n      let oldGroupId = this.oldGroup.groupId;\r\n      let existingGroupId = existingGroup.groupId;\r\n      if (oldGroupId == existingGroupId)\r\n        return false;\r\n      return true;\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GroupModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GroupModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GroupModal.vue?vue&type=template&id=388d45ea&\"\nimport script from \"./GroupModal.vue?vue&type=script&lang=js&\"\nexport * from \"./GroupModal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div>\r\n    <group-modal v-model=\"showGroupModal\" :old-group=\"activeGroup\" :groups=\"groups\"\r\n      @group-to-update=\"(group, updateHistory) => updateGroup(activeIndex, group, updateHistory)\"\r\n      @group-to-add=\"group => addGroup(group)\"\r\n      @group-to-remove=\"() => removeGroup(activeIndex)\"\r\n    />\r\n    <div class=\"sticky-top bg-light d-inline-block w-100\">\r\n      <span class=\"float-left h5\">Groupes</span>\r\n      <span class=\"float-right\">\r\n        <button @click=\"openGroupModal(-1)\"\r\n          :class=\"'btn btn-link btn-sm ' + (addGroupBtnHover ? 'text-success' : 'text-body')\"\r\n          v-b-hover=\"hover => addGroupBtnHover = hover\"\r\n        >\r\n          Nouveau groupe <b-icon-plus-circle />\r\n        </button>\r\n      </span>\r\n    </div>\r\n    <b-table small striped hover :fields=\"groupFields\" :items=\"groups\"\r\n      @row-hovered=\"(_, index) => groupRowHoverIndex = index\"\r\n      @row-unhovered=\"(_, index) => groupRowHoverIndex = -1\"\r\n    >\r\n      <template #cell(updateBtn)=\"data\">\r\n        <div class=\"float-right\">\r\n          <button @click=\"openGroupModal(data.index)\"\r\n            v-b-hover=\"hover => updateGroupBtnHover = hover\"\r\n            :class=\"'btn btn-link btn-sm' +\r\n              (updateGroupBtnHover ? ' text-success' : ' text-body') +\r\n              (groupRowHoverIndex == data.index ? ' visible' : ' invisible')\r\n            \"\r\n          >\r\n            <b-icon-pencil />\r\n          </button>\r\n        </div>\r\n      </template>\r\n    </b-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  BTable,\r\n  BIconPlusCircle, BIconPencil\r\n} from \"bootstrap-vue\";\r\n\r\nimport GroupModal from './GroupModal.vue';\r\n\r\nexport default {\r\n  name: 'GroupPane',\r\n  components: {\r\n    BTable,\r\n    BIconPlusCircle, BIconPencil,\r\n    GroupModal\r\n  },\r\n  props: {\r\n    groups: {\r\n      type: Array,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      groupFields: [\r\n        { key: 'groupId', label: 'ID' },\r\n        { key: 'size', label: 'Taille' },\r\n        { key: 'updateBtn', label: '' },\r\n      ],\r\n      addGroupBtnHover: false,\r\n      updateGroupBtnHover: false,\r\n      groupRowHoverIndex: -1,\r\n      activeIndex: -1,\r\n      activeGroup: null,\r\n      showGroupModal: false\r\n    };\r\n  },\r\n  methods: {\r\n    updateGroup(index, group, updateHistory) {\r\n      this.$emit('group-to-update', index, group, updateHistory);\r\n    },\r\n    addGroup(group) {\r\n      this.$emit('group-to-add', group);\r\n    },\r\n    removeGroup(index) {\r\n      this.$emit('group-to-remove', index);\r\n      this.updateGroupBtnHover = false;\r\n    },\r\n    openGroupModal(index) {\r\n      this.activeIndex = index;\r\n      if (index == -1)\r\n        this.activeGroup = null;\r\n      else this.activeGroup = this.groups[index];\r\n      this.showGroupModal = true;\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GroupPane.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GroupPane.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GroupPane.vue?vue&type=template&id=4992dade&\"\nimport script from \"./GroupPane.vue?vue&type=script&lang=js&\"\nexport * from \"./GroupPane.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('person-modal',{attrs:{\"old-person\":_vm.activePerson,\"persons\":_vm.persons},on:{\"person-to-update\":function (person, updateHistory) { return _vm.updatePerson(_vm.activeIndex, person, updateHistory); },\"person-to-add\":function (person) { return _vm.addPerson(person); },\"person-to-remove\":function () { return _vm.removePerson(_vm.activeIndex); }},model:{value:(_vm.showPersonModal),callback:function ($$v) {_vm.showPersonModal=$$v},expression:\"showPersonModal\"}}),_c('div',{staticClass:\"sticky-top bg-light d-inline-block w-100\"},[_c('span',{staticClass:\"float-left h5\"},[_vm._v(\"Personnes\")]),_c('span',{staticClass:\"float-right\"},[_c('button',{directives:[{name:\"b-hover\",rawName:\"v-b-hover\",value:(function (hover) { return _vm.addPersonBtnHover = hover; }),expression:\"hover => addPersonBtnHover = hover\"}],class:'btn btn-link btn-sm ' + (_vm.addPersonBtnHover ? 'text-success' : 'text-body'),on:{\"click\":function($event){return _vm.openPersonModal(-1)}}},[_vm._v(\" Nouvelle personne \"),_c('b-icon-plus-circle')],1)])]),_c('b-table',{attrs:{\"small\":\"\",\"striped\":\"\",\"hover\":\"\",\"fields\":_vm.personFields,\"items\":_vm.persons},on:{\"row-hovered\":function (_, index) { return _vm.personRowHoverIndex = index; },\"row-unhovered\":function (_, index) { return _vm.personRowHoverIndex = -1; }},scopedSlots:_vm._u([{key:\"cell(updateBtn)\",fn:function(data){return [_c('div',{staticClass:\"float-right\"},[_c('button',{directives:[{name:\"b-hover\",rawName:\"v-b-hover\",value:(function (hover) { return _vm.updatePersonBtnHover = hover; }),expression:\"hover => updatePersonBtnHover = hover\"}],class:'btn btn-link btn-sm' +\n            (_vm.updatePersonBtnHover ? ' text-success' : ' text-body') +\n            (_vm.personRowHoverIndex == data.index ? ' visible' : ' invisible'),on:{\"click\":function($event){return _vm.openPersonModal(data.index)}}},[_c('b-icon-pencil')],1)])]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-modal',{attrs:{\"title\":_vm.modalTitle},on:{\"show\":_vm.reinitPersonModal,\"hide\":_vm.reinitPersonModal},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('b-form',{attrs:{\"novalidate\":\"\"},on:{\"submit\":function (e) { return e.preventDefault(); }}},[_c('b-form-group',{attrs:{\"label\":\"Identifiant de la personne\",\"label-for\":\"personId\"}},[_c('b-form-input',{attrs:{\"type\":\"text\",\"state\":_vm.personIdConflict ? false : null,\"required\":\"\",\"maxlength\":\"32\",\"placeholder\":\"Identifiant de la personne (e.g. Prénom + Nom)\"},model:{value:(_vm.newPerson.personId),callback:function ($$v) {_vm.$set(_vm.newPerson, \"personId\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"newPerson.personId\"}}),_c('div',{staticClass:\"invalid-feedback\"},[_vm._v(\" La personne existe déjà. \")])],1),(!_vm.isCreationModal)?_c('b-form-checkbox',{attrs:{\"switch\":\"\"},model:{value:(_vm.updateHistory),callback:function ($$v) {_vm.updateHistory=$$v},expression:\"updateHistory\"}},[_vm._v(\" Modifier les occurrences de la personne dans l'historique \")]):_vm._e()],1)]},proxy:true},{key:\"modal-footer\",fn:function(){return [_c('b-button',{attrs:{\"variant\":\"success\"},on:{\"click\":_vm.checkPerson}},[_vm._v(\" Valider \"),_c('b-icon-check-circle')],1),(!_vm.isCreationModal)?_c('b-button',{attrs:{\"variant\":\"danger\"},on:{\"click\":_vm.removePerson}},[_vm._v(\" Supprimer \"),_c('b-icon-x-circle')],1):_vm._e()]},proxy:true}]),model:{value:(_vm.showPersonModal),callback:function ($$v) {_vm.showPersonModal=$$v},expression:\"showPersonModal\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <b-modal v-model=\"showPersonModal\" :title=\"modalTitle\"\r\n      @show=\"reinitPersonModal\" @hide=\"reinitPersonModal\"\r\n    >\r\n      <template #default>\r\n        <b-form novalidate @submit=\"e => e.preventDefault()\">\r\n          <b-form-group label=\"Identifiant de la personne\" label-for=\"personId\">\r\n            <b-form-input type=\"text\" v-model.trim=\"newPerson.personId\"\r\n              :state=\"personIdConflict ? false : null\" required maxlength=\"32\"\r\n              placeholder=\"Identifiant de la personne (e.g. Prénom + Nom)\"\r\n            />\r\n            <div class=\"invalid-feedback\">\r\n              La personne existe déjà.\r\n            </div>\r\n          </b-form-group>\r\n          <b-form-checkbox v-model=\"updateHistory\" v-if=\"!isCreationModal\" switch>\r\n            Modifier les occurrences de la personne dans l'historique\r\n          </b-form-checkbox>\r\n        </b-form>\r\n      </template>\r\n\r\n      <template #modal-footer>\r\n        <b-button variant=\"success\" @click=\"checkPerson\">\r\n          Valider\r\n          <b-icon-check-circle/>\r\n        </b-button>\r\n        <b-button @click=\"removePerson\" variant=\"danger\" v-if=\"!isCreationModal\">\r\n          Supprimer\r\n          <b-icon-x-circle/>\r\n        </b-button>\r\n      </template>\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  BModal, BButton, BForm, BFormGroup, BFormInput, BFormCheckbox,\r\n  BIconXCircle, BIconCheckCircle\r\n} from \"bootstrap-vue\";\r\n\r\nexport default {\r\n  name: 'PersonModal',\r\n  components: {\r\n    BModal, BButton, BForm, BFormGroup, BFormInput, BFormCheckbox,\r\n    BIconXCircle, BIconCheckCircle\r\n  },\r\n  props: {\r\n    value: {\r\n      type: Boolean,\r\n      required: true\r\n    },\r\n    oldPerson: {\r\n      type: Object\r\n    },\r\n    persons: {\r\n      type: Array,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      newPerson: this.generateNewPerson(),\r\n      updateHistory: false\r\n    };\r\n  },\r\n  methods: {\r\n    generateNewPerson() {\r\n      if (!this.oldPerson)\r\n        return { personId: '' };\r\n      return { personId: this.oldPerson.personId };\r\n    },\r\n    reinitPersonModal() {\r\n      this.newPerson = this.generateNewPerson();\r\n      this.updateHistory = true;\r\n    },\r\n    updatePerson() {\r\n      this.$emit('person-to-update', this.newPerson, this.updateHistory);\r\n      this.showPersonModal = false;\r\n    },\r\n    addPerson() {\r\n      this.$emit('person-to-add', this.newPerson);\r\n      this.showPersonModal = false;\r\n    },\r\n    removePerson() {\r\n      this.$emit('person-to-remove');\r\n      this.showPersonModal = false;\r\n    },\r\n    checkPerson() {\r\n      let validPerson = !this.personIdConflict && this.newPerson.personId.length >= 1;\r\n      if (validPerson) {\r\n        if (this.isCreationModal)\r\n          this.addPerson();\r\n        else this.updatePerson();\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    showPersonModal: {\r\n      get() {\r\n        return this.value;\r\n      },\r\n      set(newVal) {\r\n        return this.$emit('input', newVal);\r\n      }\r\n    },\r\n    isCreationModal() {\r\n      return this.oldPerson == null;\r\n    },\r\n    modalTitle() {\r\n      if (this.isCreationModal)\r\n        return \"Ajouter une personne\";\r\n      return \"Modifier la personne\";\r\n    },\r\n    personIdConflict() {\r\n      let existingPerson = this.persons.find(person => person.personId == this.newPerson.personId);\r\n      if (existingPerson == undefined)\r\n        return false;\r\n      if (this.isCreationModal)\r\n        return true;\r\n      let oldPersonId = this.oldPerson.personId;\r\n      let existingPersonId = existingPerson.personId;\r\n      if (oldPersonId == existingPersonId)\r\n        return false;\r\n      return true;\r\n    },\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PersonModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PersonModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PersonModal.vue?vue&type=template&id=105da844&\"\nimport script from \"./PersonModal.vue?vue&type=script&lang=js&\"\nexport * from \"./PersonModal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div>\r\n    <person-modal v-model=\"showPersonModal\" :old-person=\"activePerson\" :persons=\"persons\"\r\n      @person-to-update=\"(person, updateHistory) => updatePerson(activeIndex, person, updateHistory)\"\r\n      @person-to-add=\"person => addPerson(person)\"\r\n      @person-to-remove=\"() => removePerson(activeIndex)\"\r\n    />\r\n    <div class=\"sticky-top bg-light d-inline-block w-100\">\r\n      <span class=\"float-left h5\">Personnes</span>\r\n      <span class=\"float-right\">\r\n        <button @click=\"openPersonModal(-1)\"\r\n          :class=\"'btn btn-link btn-sm ' + (addPersonBtnHover ? 'text-success' : 'text-body')\"\r\n          v-b-hover=\"hover => addPersonBtnHover = hover\"\r\n        >\r\n          Nouvelle personne <b-icon-plus-circle />\r\n        </button>\r\n      </span>\r\n    </div>\r\n    <b-table small striped hover :fields=\"personFields\" :items=\"persons\"\r\n      @row-hovered=\"(_, index) => personRowHoverIndex = index\"\r\n      @row-unhovered=\"(_, index) => personRowHoverIndex = -1\"\r\n    >\r\n      <template #cell(updateBtn)=\"data\">\r\n        <div class=\"float-right\">\r\n          <button @click=\"openPersonModal(data.index)\"\r\n            v-b-hover=\"hover => updatePersonBtnHover = hover\"\r\n            :class=\"'btn btn-link btn-sm' +\r\n              (updatePersonBtnHover ? ' text-success' : ' text-body') +\r\n              (personRowHoverIndex == data.index ? ' visible' : ' invisible')\r\n            \"\r\n          >\r\n            <b-icon-pencil />\r\n          </button>\r\n        </div>\r\n      </template>\r\n    </b-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  BTable,\r\n  BIconPlusCircle, BIconPencil\r\n} from \"bootstrap-vue\";\r\n\r\nimport PersonModal from './PersonModal.vue';\r\n\r\nexport default {\r\n  name: 'PersonPane',\r\n  components: {\r\n    BTable,\r\n    BIconPlusCircle, BIconPencil,\r\n    PersonModal\r\n  },\r\n  props: {\r\n    persons: {\r\n      type: Array,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      personFields: [\r\n        { key: 'personId', label: 'ID' },\r\n        { key: 'updateBtn', label: '' },\r\n      ],\r\n      addPersonBtnHover: false,\r\n      updatePersonBtnHover: false,\r\n      personRowHoverIndex: -1,\r\n      activeIndex: -1,\r\n      activePerson: null,\r\n      showPersonModal: false\r\n    };\r\n  },\r\n  methods: {\r\n    updatePerson(index, person, updateHistory) {\r\n      this.$emit('person-to-update', index, person, updateHistory);\r\n    },\r\n    addPerson(person) {\r\n      this.$emit('person-to-add', person);\r\n    },\r\n    removePerson(index) {\r\n      this.$emit('person-to-remove', index);\r\n      this.updatePersonBtnHover = false;\r\n    },\r\n    openPersonModal(index) {\r\n      this.activeIndex = index;\r\n      if (index == -1)\r\n        this.activePerson = null;\r\n      else this.activePerson = this.persons[index];\r\n      this.showPersonModal = true;\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PersonPane.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PersonPane.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PersonPane.vue?vue&type=template&id=0fe64581&\"\nimport script from \"./PersonPane.vue?vue&type=script&lang=js&\"\nexport * from \"./PersonPane.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('constraint-modal',{attrs:{\"old-constraint\":_vm.activeConstraint,\"groups\":_vm.groups,\"persons\":_vm.persons},on:{\"constraint-to-update\":function (constraint) { return _vm.updateConstraint(_vm.activeIndex, constraint); },\"constraint-to-add\":function (constraint) { return _vm.addConstraint(constraint); },\"constraint-to-remove\":function (constraint) { return _vm.removeConstraint(_vm.activeIndex); }},model:{value:(_vm.showConstraintModal),callback:function ($$v) {_vm.showConstraintModal=$$v},expression:\"showConstraintModal\"}}),_c('div',{staticClass:\"sticky-top bg-light d-inline-block w-100\"},[_c('span',{staticClass:\"float-left h5\"},[_vm._v(\"Contraintes\")]),_c('span',{staticClass:\"float-right\"},[_c('button',{directives:[{name:\"b-hover\",rawName:\"v-b-hover\",value:(function (hover) { return _vm.addConstraintBtnHover = hover; }),expression:\"hover => addConstraintBtnHover = hover\"}],class:'btn btn-link btn-sm ' + (_vm.addConstraintBtnHover ? 'text-success' : 'text-body'),on:{\"click\":_vm.openConstraintModal}},[_vm._v(\" Nouvelle contrainte \"),_c('b-icon-plus-circle')],1)])]),_c('b-table',{attrs:{\"small\":\"\",\"striped\":\"\",\"hover\":\"\",\"fields\":_vm.constraintFields,\"items\":_vm.constraints},on:{\"row-hovered\":function (_, index) { return _vm.constraintRowHoverIndex = index; },\"row-unhovered\":function (_, index) { return _vm.constraintRowHoverIndex = -1; }},scopedSlots:_vm._u([{key:\"cell(type)\",fn:function(data){return [_vm._v(\" \"+_vm._s(_vm.constraintTypes[data.item.type])+\" \")]}},{key:\"cell(personIds)\",fn:function(data){return [_vm._v(\" \"+_vm._s(data.item.persons.map(function (item) { return item.personId; }).join(', '))+\" \")]}},{key:\"cell(updateBtn)\",fn:function(data){return [_c('div',{staticClass:\"float-right\"},[_c('button',{directives:[{name:\"b-hover\",rawName:\"v-b-hover\",value:(function (hover) { return _vm.updateConstraintBtnHover = hover; }),expression:\"hover => updateConstraintBtnHover = hover\"}],class:'btn btn-link btn-sm' +\n            (_vm.updateConstraintBtnHover ? ' text-success' : ' text-body') +\n            (_vm.constraintRowHoverIndex == data.index ? ' visible' : ' invisible'),on:{\"click\":function($event){return _vm.openConstraintModal(data.index)}}},[_c('b-icon-pencil')],1)])]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-modal',{attrs:{\"title\":_vm.modalTitle},on:{\"show\":_vm.reinitConstraintModal,\"hide\":_vm.reinitConstraintModal},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [(_vm.newConstraint)?_c('div',[_c('b-form-group',{attrs:{\"label\":\"Type\",\"label-for\":\"type\"}},[_c('b-form-select',{attrs:{\"options\":_vm.typeOptions,\"id\":\"type\"},model:{value:(_vm.newConstraint.type),callback:function ($$v) {_vm.$set(_vm.newConstraint, \"type\", $$v)},expression:\"newConstraint.type\"}})],1),_c('b-form-group',{attrs:{\"label\":\"Ajouter une personne\",\"label-for\":\"newPerson\"}},[_c('b-form-select',{attrs:{\"options\":_vm.personOptions,\"id\":\"newPerson\"},on:{\"change\":function (personId) { return _vm.addPerson(personId); }},scopedSlots:_vm._u([{key:\"first\",fn:function(){return [_c('b-form-select-option',{attrs:{\"value\":\"\",\"disabled\":\"\"}},[_vm._v(\"-- Sélectionner une personne --\")])]},proxy:true}],null,false,4021855126),model:{value:(_vm.reinitSelectPerson),callback:function ($$v) {_vm.reinitSelectPerson=$$v},expression:\"reinitSelectPerson\"}})],1),(_vm.newConstraint.persons.length >= 1)?_c('div',[_c('b-table',{attrs:{\"small\":\"\",\"striped\":\"\",\"hover\":\"\",\"fields\":_vm.personFields,\"items\":_vm.newConstraint.persons},on:{\"row-hovered\":function (_, index) { return _vm.personRowHoverIndex = index; },\"row-unhovered\":function (_, index) { return _vm.personRowHoverIndex = -1; }},scopedSlots:_vm._u([{key:\"cell(removeBtn)\",fn:function(data){return [_c('div',{staticClass:\"float-right\"},[_c('button',{directives:[{name:\"b-hover\",rawName:\"v-b-hover\",value:(function (hover) { return _vm.removePersonBtnHover = hover; }),expression:\"hover => removePersonBtnHover = hover\"}],class:'btn btn-link btn-sm' +\n                    (_vm.removePersonBtnHover ? ' text-danger' : ' text-body') +\n                    (_vm.personRowHoverIndex == data.index ? ' visible' : ' invisible'),on:{\"click\":function($event){return _vm.removePerson(data.index)}}},[_c('b-icon-x-circle')],1)])]}}],null,false,4039853407)})],1):_vm._e(),(_vm.newConstraint.type == 'together')?_c('div',[_c('b-form-group',{attrs:{\"label\":\"Dans le groupe\",\"label-for\":\"mandatoryGroup\"}},[_c('b-form-select',{attrs:{\"options\":_vm.groupOptions,\"id\":\"mandatoryGroup\",\"disabled\":_vm.newConstraint.forbiddenGroups.length >= 1},scopedSlots:_vm._u([{key:\"first\",fn:function(){return [_c('b-select-option',{attrs:{\"value\":null}})]},proxy:true}],null,false,26767175),model:{value:(_vm.newConstraint.mandatoryGroup),callback:function ($$v) {_vm.$set(_vm.newConstraint, \"mandatoryGroup\", $$v)},expression:\"newConstraint.mandatoryGroup\"}})],1),_c('b-form-group',{attrs:{\"label\":\"Pas dans les groupes\",\"label-for\":\"forbiddenGroups\"}},[_c('b-form-select',{attrs:{\"options\":_vm.groupOptions,\"id\":\"forbiddenGroups\",\"disabled\":_vm.newConstraint.mandatoryGroup != null},on:{\"change\":function (groupId) { return _vm.addGroup(groupId); }},scopedSlots:_vm._u([{key:\"first\",fn:function(){return [_c('b-form-select-option',{attrs:{\"value\":\"\",\"disabled\":\"\"}},[_vm._v(\"-- Sélectionner un groupe --\")])]},proxy:true}],null,false,2889731287),model:{value:(_vm.reinitSelectGroup),callback:function ($$v) {_vm.reinitSelectGroup=$$v},expression:\"reinitSelectGroup\"}})],1),(_vm.newConstraint.forbiddenGroups.length >= 1)?_c('div',[_c('b-table',{attrs:{\"small\":\"\",\"striped\":\"\",\"hover\":\"\",\"fields\":_vm.groupFields,\"items\":_vm.newConstraint.forbiddenGroups},scopedSlots:_vm._u([{key:\"cell(removeBtn)\",fn:function(data){return [_c('div',{staticClass:\"float-right\"},[_c('button',{directives:[{name:\"b-hover\",rawName:\"v-b-hover\",value:(function (hover) { return _vm.removeGroupBtnHover = hover; }),expression:\"hover => removeGroupBtnHover = hover\"}],class:'btn btn-link btn-sm' +\n                      (_vm.removeGroupBtnHover ? ' text-danger' : ' text-body') +\n                      (_vm.groupRowHoverIndex == data.index ? ' visible' : ' invisible'),on:{\"click\":function($event){return _vm.removeGroup(data.index)}}},[_c('b-icon-x-circle')],1)])]}}],null,false,1387577813)})],1):_vm._e()],1):_vm._e()],1):_vm._e()]},proxy:true},{key:\"modal-footer\",fn:function(){return [_c('b-button',{attrs:{\"variant\":\"success\"},on:{\"click\":_vm.checkConstraint}},[_vm._v(\" Valider \"),_c('b-icon-check-circle')],1),(!_vm.isCreationModal)?_c('b-button',{attrs:{\"variant\":\"danger\"},on:{\"click\":_vm.removeConstraint}},[_vm._v(\" Supprimer \"),_c('b-icon-x-circle')],1):_vm._e()]},proxy:true}]),model:{value:(_vm.showConstraintModal),callback:function ($$v) {_vm.showConstraintModal=$$v},expression:\"showConstraintModal\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <b-modal v-model=\"showConstraintModal\" :title=\"modalTitle\"\r\n      @show=\"reinitConstraintModal\" @hide=\"reinitConstraintModal\"\r\n    >\r\n      <template #default>\r\n        <div v-if=\"newConstraint\">\r\n          <b-form-group label=\"Type\" label-for=\"type\">\r\n            <b-form-select :options=\"typeOptions\" id=\"type\" v-model=\"newConstraint.type\" />\r\n          </b-form-group>\r\n          <b-form-group\r\n            label=\"Ajouter une personne\"\r\n            label-for=\"newPerson\"\r\n          >\r\n            <b-form-select :options=\"personOptions\" id=\"newPerson\"\r\n              @change=\"personId => addPerson(personId)\" v-model=\"reinitSelectPerson\"\r\n            >\r\n              <template #first>\r\n                <b-form-select-option value=\"\" disabled>-- Sélectionner une personne --</b-form-select-option>\r\n              </template>\r\n            </b-form-select>\r\n          </b-form-group>\r\n          <div v-if=\"newConstraint.persons.length >= 1\">\r\n            <b-table small striped hover :fields=\"personFields\" :items=\"newConstraint.persons\"\r\n              @row-hovered=\"(_, index) => personRowHoverIndex = index\"\r\n              @row-unhovered=\"(_, index) => personRowHoverIndex = -1\"\r\n            >\r\n              <template #cell(removeBtn)=\"data\">\r\n                <div class=\"float-right\">\r\n                  <button @click=\"removePerson(data.index)\"\r\n                    v-b-hover=\"hover => removePersonBtnHover = hover\"\r\n                    :class=\"'btn btn-link btn-sm' +\r\n                      (removePersonBtnHover ? ' text-danger' : ' text-body') +\r\n                      (personRowHoverIndex == data.index ? ' visible' : ' invisible')\r\n                    \"\r\n                  >\r\n                    <b-icon-x-circle />\r\n                  </button>\r\n                </div>\r\n              </template>\r\n            </b-table>\r\n          </div>\r\n          <div v-if=\"newConstraint.type == 'together'\">\r\n            <b-form-group label=\"Dans le groupe\" label-for=\"mandatoryGroup\">\r\n              <b-form-select :options=\"groupOptions\" id=\"mandatoryGroup\"\r\n                v-model=\"newConstraint.mandatoryGroup\"\r\n                :disabled=\"newConstraint.forbiddenGroups.length >= 1\"\r\n              >\r\n                <template #first>\r\n                  <b-select-option :value=\"null\" />\r\n                </template>\r\n              </b-form-select>\r\n            </b-form-group>\r\n            <b-form-group label=\"Pas dans les groupes\" label-for=\"forbiddenGroups\">\r\n              <b-form-select :options=\"groupOptions\" id=\"forbiddenGroups\" v-model=\"reinitSelectGroup\"\r\n                @change=\"groupId => addGroup(groupId)\" :disabled=\"newConstraint.mandatoryGroup != null\"\r\n              >\r\n                <template #first>\r\n                  <b-form-select-option value=\"\" disabled>-- Sélectionner un groupe --</b-form-select-option>\r\n                </template>\r\n              </b-form-select>\r\n            </b-form-group>\r\n            <div v-if=\"newConstraint.forbiddenGroups.length >= 1\">\r\n              <b-table small striped hover :fields=\"groupFields\" :items=\"newConstraint.forbiddenGroups\">\r\n                <template #cell(removeBtn)=\"data\">\r\n                  <div class=\"float-right\">\r\n                    <button @click=\"removeGroup(data.index)\"\r\n                      v-b-hover=\"hover => removeGroupBtnHover = hover\"\r\n                      :class=\"'btn btn-link btn-sm' +\r\n                        (removeGroupBtnHover ? ' text-danger' : ' text-body') +\r\n                        (groupRowHoverIndex == data.index ? ' visible' : ' invisible')\r\n                      \"\r\n                    >\r\n                      <b-icon-x-circle />\r\n                    </button>\r\n                  </div>\r\n                </template>\r\n              </b-table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </template>\r\n\r\n      <template #modal-footer>\r\n        <b-button variant=\"success\" @click=\"checkConstraint\">\r\n          Valider\r\n          <b-icon-check-circle/>\r\n        </b-button>\r\n        <b-button @click=\"removeConstraint\" variant=\"danger\" v-if=\"!isCreationModal\">\r\n          Supprimer\r\n          <b-icon-x-circle/>\r\n        </b-button>\r\n      </template>\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  BModal, BButton, BTable, BFormGroup, BFormSelect, BFormSelectOption,\r\n  BIconXCircle, BIconCheckCircle,\r\n} from \"bootstrap-vue\";\r\n\r\nexport default {\r\n  name: 'ConstraintModal',\r\n  components: {\r\n    BModal, BButton, BTable, BFormGroup, BFormSelect, BFormSelectOption,\r\n    BIconXCircle, BIconCheckCircle\r\n  },\r\n  props: {\r\n    value: {\r\n      type: Boolean,\r\n      required: true\r\n    },\r\n    oldConstraint: {\r\n      type: Object\r\n    },\r\n    persons: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    groups: {\r\n      type: Array,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      newConstraint: this.generateNewConstraint(),\r\n      typeOptions: [\r\n        { value: 'apart', text: 'Séparés' },\r\n        { value: 'together', text: 'Ensemble' }\r\n      ],\r\n      personOptions: this.generatePersonOptions(),\r\n      personFields: [\r\n        { key: 'personId', label: 'Personnes' },\r\n        { key: 'removeBtn', label: '' },\r\n      ],\r\n      groupOptions: this.generateGroupOptions(),\r\n      groupFields: [\r\n        { key: 'groupId', label: 'Groupes interdits' },\r\n        { key: 'removeBtn', label: '' }\r\n      ],\r\n      removePersonBtnHover: false,\r\n      personRowHoverIndex: -1,\r\n      removeGroupBtnHover: false,\r\n      groupRowHoverIndex: -1,\r\n      reinitSelectPerson: null,\r\n      reinitSelectGroup: null\r\n    };\r\n  },\r\n  methods: {\r\n    generateNewConstraint() {\r\n      if (!this.oldConstraint)\r\n        return {\r\n          type: 'apart',\r\n          persons: [],\r\n          mandatoryGroup: null,\r\n          forbiddenGroups: []\r\n        };\r\n      return {\r\n        type: this.oldConstraint.type,\r\n        persons: [...this.oldConstraint.persons],\r\n        mandatoryGroup: this.oldConstraint.mandatoryGroup,\r\n        forbiddenGroups: [...this.oldConstraint.forbiddenGroups]\r\n      };\r\n    },\r\n    reinitConstraintModal() {\r\n      this.newConstraint = this.generateNewConstraint();\r\n      this.personOptions = this.generatePersonOptions();\r\n      this.groupOptions = this.generateGroupOptions();\r\n    },\r\n    updateConstraint() {\r\n      this.$emit('constraint-to-update', this.newConstraint);\r\n      this.showConstraintModal = false;\r\n    },\r\n    addConstraint() {\r\n      this.$emit('constraint-to-add', this.newConstraint);\r\n      this.showConstraintModal = false;\r\n    },\r\n    removeConstraint() {\r\n      this.$emit('constraint-to-remove');\r\n      this.showConstraintModal = false;\r\n    },\r\n    addPerson(personId) {\r\n      this.newConstraint.persons.push({ personId: personId });\r\n      this.personOptions = this.generatePersonOptions();\r\n    },\r\n    removePerson(index) {\r\n      let personId = this.newConstraint.persons[index].personId;\r\n      this.newConstraint.persons.splice(index, 1);\r\n      this.personOptions.push({ value: personId, text: personId });\r\n      this.reinitSelectPerson = null;\r\n      this.removePersonBtnHover = false;\r\n    },\r\n    addGroup(groupId) {\r\n      this.newConstraint.forbiddenGroups.push({ groupId: groupId });\r\n      this.groupOptions = this.generateGroupOptions();\r\n    },\r\n    removeGroup(index) {\r\n      this.newConstraint.forbiddenGroups.splice(index, 1);\r\n      this.groupOptions = this.generateGroupOptions();\r\n      this.reinitSelectGroup = null;\r\n      this.removeGroupBtnHover = false;\r\n    },\r\n    generatePersonOptions() {\r\n      let options = [];\r\n      if (this.newConstraint) {\r\n        for (let person of this.persons) {\r\n          if (this.newConstraint.persons.every(({ personId }) => personId != person.personId))\r\n            options.push({\r\n              value: person.personId,\r\n              text: person.personId\r\n            });\r\n        }\r\n      }\r\n      return options;\r\n    },\r\n    generateGroupOptions() {\r\n      let options = [];\r\n      if (this.newConstraint) {\r\n        for (let group of this.groups) {\r\n          if (this.newConstraint.forbiddenGroups.every(({ groupId }) => groupId != group.groupId))\r\n            options.push({\r\n              value: group.groupId,\r\n              text: group.groupId\r\n            });\r\n        }\r\n      }\r\n      return options;\r\n    },\r\n    checkConstraint() {\r\n      let validContraint = this.newConstraint.persons.length >= 1;\r\n      if (validContraint) {\r\n        if (this.isCreationModal)\r\n          this.addConstraint();\r\n        else this.updateConstraint();\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    persons() {\r\n      this.personOptions = this.generatePersonOptions();\r\n    },\r\n    groups() {\r\n      this.groupOptions = this.generateGroupOptions();\r\n    }\r\n  },\r\n  computed: {\r\n    showConstraintModal: {\r\n      get() {\r\n        return this.value;\r\n      },\r\n      set(newVal) {\r\n        return this.$emit('input', newVal);\r\n      }\r\n    },\r\n    isCreationModal() {\r\n      return this.oldConstraint == null;\r\n    },\r\n    modalTitle() {\r\n      if (this.isCreationModal)\r\n        return \"Ajouter une contrainte\";\r\n      return \"Modifier la contrainte\";\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConstraintModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConstraintModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ConstraintModal.vue?vue&type=template&id=3e3455e4&\"\nimport script from \"./ConstraintModal.vue?vue&type=script&lang=js&\"\nexport * from \"./ConstraintModal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div>\r\n    <constraint-modal v-model=\"showConstraintModal\" :old-constraint=\"activeConstraint\"\r\n      :groups=\"groups\" :persons=\"persons\"\r\n      @constraint-to-update=\"constraint => updateConstraint(activeIndex, constraint)\"\r\n      @constraint-to-add=\"constraint => addConstraint(constraint)\"\r\n      @constraint-to-remove=\"constraint => removeConstraint(activeIndex)\"\r\n    />\r\n    <div class=\"sticky-top bg-light d-inline-block w-100\">\r\n      <span class=\"float-left h5\">Contraintes</span>\r\n      <span class=\"float-right\">\r\n        <button @click=\"openConstraintModal\"\r\n          :class=\"'btn btn-link btn-sm ' + (addConstraintBtnHover ? 'text-success' : 'text-body')\"\r\n          v-b-hover=\"hover => addConstraintBtnHover = hover\"\r\n        >\r\n          Nouvelle contrainte <b-icon-plus-circle />\r\n        </button>\r\n      </span>\r\n    </div>\r\n    <b-table small striped hover :fields=\"constraintFields\" :items=\"constraints\"\r\n      @row-hovered=\"(_, index) => constraintRowHoverIndex = index\"\r\n      @row-unhovered=\"(_, index) => constraintRowHoverIndex = -1\"\r\n    >\r\n      <template #cell(type)=\"data\">\r\n        {{ constraintTypes[data.item.type] }}  \r\n      </template>\r\n\r\n      <template #cell(personIds)=\"data\">\r\n        {{ data.item.persons.map(item => item.personId).join(', ') }}  \r\n      </template>\r\n\r\n      <template #cell(updateBtn)=\"data\">\r\n        <div class=\"float-right\">\r\n          <button @click=\"openConstraintModal(data.index)\"\r\n            v-b-hover=\"hover => updateConstraintBtnHover = hover\"\r\n            :class=\"'btn btn-link btn-sm' +\r\n              (updateConstraintBtnHover ? ' text-success' : ' text-body') +\r\n              (constraintRowHoverIndex == data.index ? ' visible' : ' invisible')\r\n            \"\r\n          >\r\n            <b-icon-pencil />\r\n          </button>\r\n        </div>\r\n      </template>\r\n    </b-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  BTable,\r\n  BIconPlusCircle, BIconPencil,\r\n} from \"bootstrap-vue\";\r\n\r\nimport ConstraintModal from \"./ConstraintModal.vue\";\r\n\r\nexport default {\r\n  name: 'ConstraintPane',\r\n  components: {\r\n    BTable,\r\n    BIconPlusCircle, BIconPencil,\r\n    ConstraintModal\r\n  },\r\n  props: {\r\n    constraints: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    persons: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    groups: {\r\n      type: Array,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      constraintFields: [\r\n        { key: 'type', label: 'Type' },\r\n        { key: 'personIds', label: 'Personnes' },\r\n        { key: 'updateBtn', label: '' },\r\n      ],\r\n      addConstraintBtnHover: false,\r\n      updateConstraintBtnHover: false,\r\n      constraintRowHoverIndex: -1,\r\n      activeIndex: -1,\r\n      activeConstraint: null,\r\n      showConstraintModal: false,\r\n      constraintTypes: {\r\n        apart: 'Séparés',\r\n        together: 'Ensemble'\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    updateConstraint(index, constraint) {\r\n      this.$emit('constraint-to-update', index, constraint);\r\n    },\r\n    addConstraint(constraint) {\r\n      this.$emit('constraint-to-add', constraint);\r\n    },\r\n    removeConstraint(index) {\r\n      this.$emit('constraint-to-remove', index);\r\n      this.removeConstraintHover = -1;\r\n    },\r\n    openConstraintModal(index) {\r\n      this.activeIndex = index;\r\n      if (index == -1)\r\n        this.activeConstraint = null;\r\n      else this.activeConstraint = this.constraints[index];\r\n      this.showConstraintModal = true;\r\n    }\r\n  },\r\n  watch: {\r\n    persons: {\r\n      deep: true,\r\n      handler() { }\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConstraintPane.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConstraintPane.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ConstraintPane.vue?vue&type=template&id=48ca5696&\"\nimport script from \"./ConstraintPane.vue?vue&type=script&lang=js&\"\nexport * from \"./ConstraintPane.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('entry-modal',{attrs:{\"remaining-persons\":_vm.remainingPersons,\"old-entry-group\":_vm.activeEntryGroup},on:{\"entry-group-to-update\":_vm.updateEntryGroup},model:{value:(_vm.showEntryModal),callback:function ($$v) {_vm.showEntryModal=$$v},expression:\"showEntryModal\"}}),_c('save-entry-modal',{attrs:{\"remaining-persons\":_vm.remainingPersons},on:{\"entry-to-save\":_vm.saveEntry},model:{value:(_vm.showSaveEntryModal),callback:function ($$v) {_vm.showSaveEntryModal=$$v},expression:\"showSaveEntryModal\"}}),_c('div',{staticClass:\"sticky-top bg-light d-inline-block w-100\"},[_c('span',{staticClass:\"float-left h5\"},[_vm._v(\"Proposition\")]),_c('span',{staticClass:\"float-right\"},[(_vm.entry.groups.length > 0)?_c('button',{directives:[{name:\"b-hover\",rawName:\"v-b-hover\",value:(function (hover) { return _vm.saveEntryBtnHover = hover; }),expression:\"hover => saveEntryBtnHover = hover\"}],class:'btn btn-link btn-sm ' + (_vm.saveEntryBtnHover ? 'text-success' : 'text-body'),on:{\"click\":function($event){_vm.showSaveEntryModal = true}}},[_vm._v(\" Sauvegarder \"),_c('b-icon-check-circle')],1):_vm._e(),_c('button',{directives:[{name:\"b-hover\",rawName:\"v-b-hover\",value:(function (hover) { return _vm.generateEntryBtnHover = hover; }),expression:\"hover => generateEntryBtnHover = hover\"}],class:'btn btn-link btn-sm ' + (_vm.generateEntryBtnHover ? 'text-primary' : 'text-body'),on:{\"click\":_vm.generateEntry}},[_vm._v(\" Générer \"),_c('b-icon-play-circle')],1)])]),_c('b-table',{attrs:{\"small\":\"\",\"striped\":\"\",\"hover\":\"\",\"fields\":_vm.entryFields,\"items\":_vm.entry.groups},on:{\"row-hovered\":function (_, index) { return _vm.entryGroupRowHoverIndex = index; },\"row-unhovered\":function (_, index) { return _vm.entryGroupRowHoverIndex = -1; }},scopedSlots:_vm._u([{key:\"cell(personIds)\",fn:function(data){return [_vm._v(\" \"+_vm._s(data.item.persons.map(function (item) { return item.personId; }).join(', '))+\" \")]}},{key:\"cell(updateBtn)\",fn:function(data){return [_c('div',{staticClass:\"float-right\"},[_c('button',{directives:[{name:\"b-hover\",rawName:\"v-b-hover\",value:(function (hover) { return _vm.updateEntryGroupBtnHover = hover; }),expression:\"hover => updateEntryGroupBtnHover = hover\"}],class:'btn btn-link btn-sm' +\n            (_vm.updateEntryGroupBtnHover ? ' text-success' : ' text-body') +\n            (_vm.entryGroupRowHoverIndex == data.index ? ' visible' : ' invisible'),on:{\"click\":function($event){return _vm.openEntryModal(data.index)}}},[_c('b-icon-pencil')],1)])]}}])}),(_vm.remainingPersons.length >= 1)?_c('p',[_c('span',{staticClass:\"font-italic font-weight-bold\"},[_vm._v(\"Personnes restantes :\")]),_vm._v(\" \"+_vm._s(_vm.remainingPersons.map(function (person) { return person.personId; }).join(', '))+\" \")]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-modal',{attrs:{\"title\":_vm.modalTitle},on:{\"show\":_vm.reinitEntryModal,\"hide\":_vm.reinitEntryModal},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [(_vm.newEntryGroup)?_c('div',[_c('b-form-group',{attrs:{\"label\":\"Ajouter une personne\",\"label-for\":\"newPerson\"}},[_c('b-form-select',{attrs:{\"options\":_vm.personOptions,\"id\":\"newPerson\"},on:{\"change\":function (personId) { return _vm.addPerson(personId); }},scopedSlots:_vm._u([{key:\"first\",fn:function(){return [_c('b-form-select-option',{attrs:{\"value\":\"\",\"disabled\":\"\"}},[_vm._v(\"-- Sélectionner une personne --\")])]},proxy:true}],null,false,4021855126),model:{value:(_vm.reinitSelectPerson),callback:function ($$v) {_vm.reinitSelectPerson=$$v},expression:\"reinitSelectPerson\"}})],1),(_vm.newEntryGroup.persons.length >= 1)?_c('div',[_c('b-table',{attrs:{\"small\":\"\",\"striped\":\"\",\"hover\":\"\",\"fields\":_vm.personFields,\"items\":_vm.newEntryGroup.persons},on:{\"row-hovered\":function (_, index) { return _vm.personRowHoverIndex = index; },\"row-unhovered\":function (_, index) { return _vm.personRowHoverIndex = -1; }},scopedSlots:_vm._u([{key:\"cell(removeBtn)\",fn:function(data){return [_c('div',{staticClass:\"float-right\"},[_c('button',{directives:[{name:\"b-hover\",rawName:\"v-b-hover\",value:(function (hover) { return _vm.removePersonBtnHover = hover; }),expression:\"hover => removePersonBtnHover = hover\"}],class:'btn btn-link btn-sm' +\n                    (_vm.removePersonBtnHover ? ' text-danger' : ' text-body') +\n                    (_vm.personRowHoverIndex == data.index ? ' visible' : ' invisible'),on:{\"click\":function($event){return _vm.removePerson(data.index)}}},[_c('b-icon-x-circle')],1)])]}}],null,false,4039853407)})],1):_vm._e()],1):_vm._e()]},proxy:true},{key:\"modal-footer\",fn:function(){return [_c('b-button',{attrs:{\"variant\":\"success\"},on:{\"click\":_vm.checkEntryGroup}},[_vm._v(\" Valider \"),_c('b-icon-check-circle')],1)]},proxy:true}]),model:{value:(_vm.showEntryModal),callback:function ($$v) {_vm.showEntryModal=$$v},expression:\"showEntryModal\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <b-modal v-model=\"showEntryModal\" :title=\"modalTitle\"\r\n      @show=\"reinitEntryModal\" @hide=\"reinitEntryModal\"\r\n    >\r\n      <template #default>\r\n        <div v-if=\"newEntryGroup\">\r\n          <b-form-group label=\"Ajouter une personne\" label-for=\"newPerson\">\r\n            <b-form-select :options=\"personOptions\" id=\"newPerson\"\r\n              @change=\"personId => addPerson(personId)\" v-model=\"reinitSelectPerson\"\r\n            >\r\n              <template #first>\r\n                <b-form-select-option value=\"\" disabled>-- Sélectionner une personne --</b-form-select-option>\r\n              </template>\r\n            </b-form-select>\r\n          </b-form-group>\r\n          <div v-if=\"newEntryGroup.persons.length >= 1\">\r\n            <b-table small striped hover :fields=\"personFields\" :items=\"newEntryGroup.persons\"\r\n              @row-hovered=\"(_, index) => personRowHoverIndex = index\"\r\n              @row-unhovered=\"(_, index) => personRowHoverIndex = -1\"\r\n            >\r\n              <template #cell(removeBtn)=\"data\">\r\n                <div class=\"float-right\">\r\n                  <button @click=\"removePerson(data.index)\"\r\n                    v-b-hover=\"hover => removePersonBtnHover = hover\"\r\n                    :class=\"'btn btn-link btn-sm' +\r\n                      (removePersonBtnHover ? ' text-danger' : ' text-body') +\r\n                      (personRowHoverIndex == data.index ? ' visible' : ' invisible')\r\n                    \"\r\n                  >\r\n                    <b-icon-x-circle />\r\n                  </button>\r\n                </div>\r\n              </template>\r\n            </b-table>\r\n          </div>\r\n        </div>\r\n      </template>\r\n\r\n      <template #modal-footer>\r\n        <b-button variant=\"success\" @click=\"checkEntryGroup\">\r\n          Valider\r\n          <b-icon-check-circle/>\r\n        </b-button>\r\n      </template>\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  BModal, BFormGroup, BFormSelect,\r\n  BIconXCircle, BIconCheckCircle,\r\n} from \"bootstrap-vue\";\r\n\r\nexport default {\r\n  name: 'EntryModal',\r\n  components: {\r\n    BModal, BFormGroup, BFormSelect,\r\n    BIconXCircle, BIconCheckCircle\r\n  },\r\n  props: {\r\n    value: {\r\n      type: Boolean,\r\n      required: true\r\n    },\r\n    oldEntryGroup: {\r\n      type: Object\r\n    },\r\n    remainingPersons: {\r\n      type: Array,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      newEntryGroup: this.generateNewEntryGroup(),\r\n      personFields: [\r\n        { key: 'personId', label: 'Personnes' },\r\n        { key: 'removeBtn', label: '' },\r\n      ],\r\n      personOptions: this.generatePersonOptions(),\r\n      removePersonBtnHover: false,\r\n      personRowHoverIndex: -1,\r\n      reinitSelectPerson: null,\r\n    };\r\n  },\r\n  methods: {\r\n    generateNewEntryGroup() {\r\n      if (!this.oldEntryGroup)\r\n        return {\r\n          groupId: null,\r\n          persons: []\r\n        };\r\n      return {\r\n        groupId: this.oldEntryGroup.groupId,\r\n        persons: [...this.oldEntryGroup.persons]\r\n      };\r\n    },\r\n    reinitEntryModal() {\r\n      this.newEntryGroup = this.generateNewEntryGroup();\r\n      this.personOptions = this.generatePersonOptions();\r\n    },\r\n    updateEntryGroup() {\r\n      let newRemainingPersons = this.personOptions.map(option => ({ personId: option.value }));\r\n      this.$emit('entry-group-to-update', this.newEntryGroup, newRemainingPersons);\r\n      this.showEntryModal = false;\r\n    },\r\n    addPerson(personId) {\r\n      this.newEntryGroup.persons.push({ personId: personId });\r\n      let index;\r\n      for (index = 0; index < this.personOptions.length; index++)\r\n        if (this.personOptions[index].value == personId)\r\n          break;\r\n      this.personOptions.splice(index, 1);\r\n      this.reinitSelectPerson = null;\r\n    },\r\n    removePerson(index) {\r\n      let personId = this.newEntryGroup.persons[index].personId;\r\n      this.newEntryGroup.persons.splice(index, 1);\r\n      this.personOptions.push({ value: personId, text: personId });\r\n      this.removePersonBtnHover = false;\r\n    },\r\n    generatePersonOptions() {\r\n      let options = [];\r\n      if (this.newEntryGroup) {\r\n        for (let person of this.remainingPersons)\r\n          options.push({\r\n            value: person.personId,\r\n            text: person.personId\r\n          });\r\n      }\r\n      return options;\r\n    },\r\n    checkEntryGroup() {\r\n      let validEntryGroup = true;\r\n      if (validEntryGroup)\r\n        this.updateEntryGroup();\r\n    }\r\n  },\r\n  watch: {\r\n    persons() {\r\n      this.personOptions = this.generatePersonOptions();\r\n    }\r\n  },\r\n  computed: {\r\n    showEntryModal: {\r\n      get() {\r\n        return this.value;\r\n      },\r\n      set(newVal) {\r\n        return this.$emit('input', newVal);\r\n      }\r\n    },\r\n    modalTitle() {\r\n      if (!this.oldEntryGroup)\r\n        return '';\r\n      return \"Modifier le groupe '\" + this.oldEntryGroup.groupId + \"'\";\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EntryModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EntryModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EntryModal.vue?vue&type=template&id=56dbdec5&\"\nimport script from \"./EntryModal.vue?vue&type=script&lang=js&\"\nexport * from \"./EntryModal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-modal',{attrs:{\"title\":\"Sauvegarder la proposition\"},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('b-form-group',{attrs:{\"label\":\"Titre\",\"label-for\":\"entryTitle\"}},[_c('b-form-input',{attrs:{\"type\":\"text\",\"required\":\"\",\"maxlength\":\"32\",\"placeholder\":\"Titre de la proposition (e.g. Date + Objet)\"},model:{value:(_vm.entryTitle),callback:function ($$v) {_vm.entryTitle=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"entryTitle\"}})],1),(_vm.remainingPersons.length >= 1)?_c('p',{staticClass:\"text-danger\"},[_c('span',{staticClass:\"font-italic font-weight-bold\"},[_c('b-icon-exclamation-triangle'),_vm._v(\" Certaines personnes n'ont pas été placées : \")],1),_vm._v(\" \"+_vm._s(_vm.remainingPersons.map(function (person) { return person.personId; }).join(', '))+\" \")]):_vm._e()]},proxy:true},{key:\"modal-footer\",fn:function(){return [_c('b-button',{attrs:{\"variant\":\"success\"},on:{\"click\":_vm.saveEntry}},[_vm._v(\" Valider \"),_c('b-icon-check-circle')],1)]},proxy:true}]),model:{value:(_vm.showSaveEntryModal),callback:function ($$v) {_vm.showSaveEntryModal=$$v},expression:\"showSaveEntryModal\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <b-modal v-model=\"showSaveEntryModal\" title=\"Sauvegarder la proposition\">\r\n      <template #default>\r\n        <b-form-group label=\"Titre\" label-for=\"entryTitle\">\r\n          <b-form-input type=\"text\" v-model.trim=\"entryTitle\"\r\n            required maxlength=\"32\"\r\n            placeholder=\"Titre de la proposition (e.g. Date + Objet)\"\r\n          />\r\n        </b-form-group>\r\n        <p v-if=\"remainingPersons.length >= 1\" class=\"text-danger\">\r\n          <span class=\"font-italic font-weight-bold\">\r\n            <b-icon-exclamation-triangle /> Certaines personnes n'ont pas été placées :\r\n          </span>\r\n          {{ remainingPersons.map(person => person.personId).join(', ') }}\r\n        </p>\r\n      </template>\r\n\r\n      <template #modal-footer>\r\n        <b-button variant=\"success\" @click=\"saveEntry\">\r\n          Valider\r\n          <b-icon-check-circle/>\r\n        </b-button>\r\n      </template>\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  BModal, BButton, BFormGroup, BFormInput,\r\n  BIconCheckCircle\r\n} from \"bootstrap-vue\";\r\n\r\nexport default {\r\n  name: 'SaveEntryModal',\r\n  components: {\r\n    BModal, BButton, BFormGroup, BFormInput,\r\n    BIconCheckCircle\r\n  },\r\n  props: {\r\n    value: {\r\n      type: Boolean,\r\n      required: true\r\n    },\r\n    remainingPersons: {\r\n      type: Array,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      entryTitle: null\r\n    };\r\n  },\r\n  methods: {\r\n    saveEntry() {\r\n      if (this.entryTitle.length >= 1) {\r\n        this.$emit('entry-to-save', this.entryTitle);\r\n        this.showSaveEntryModal = false;\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    showSaveEntryModal: {\r\n      get() {\r\n        return this.value;\r\n      },\r\n      set(newVal) {\r\n        return this.$emit('input', newVal);\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SaveEntryModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SaveEntryModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SaveEntryModal.vue?vue&type=template&id=265eb8cc&\"\nimport script from \"./SaveEntryModal.vue?vue&type=script&lang=js&\"\nexport * from \"./SaveEntryModal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export function getPersonPersonKey(person1Id, person2Id) {\r\n    return JSON.stringify([person1Id, person2Id].sort());\r\n}\r\nexport function getPersonGroupKey(personId, groupId) {\r\n    return JSON.stringify([personId, groupId]);\r\n}\r\nexport function sum(arr) {\r\n    return Array.from(arr).reduce((a, b) => a + b, 0);\r\n}\r\nexport function min(arr) {\r\n    return Math.min(...arr);\r\n}\r\nexport function max(arr) {\r\n    return Math.max(...arr);\r\n}\r\nexport function all(arr, fn) {\r\n    return arr.every(fn);\r\n}\r\nexport function any(arr, fn) {\r\n    return arr.some(fn);\r\n}\r\nexport function assert(condition, message) {\r\n    if (!condition)\r\n        throw new Error('Assertion error: ' + message);\r\n}\r\nexport function randomChoice(arr) {\r\n    return arr[Math.floor(Math.random() * arr.length)];\r\n}\r\nexport function randomShuffle(arr) {\r\n    for (let i = arr.length - 1; i > 0; i--) {\r\n        const j = Math.floor(Math.random() * (i + 1));\r\n        [arr[i], arr[j]] = [arr[j], arr[i]];\r\n    }\r\n    return arr;\r\n}\r\n//# sourceMappingURL=util.js.map","import { getPersonPersonKey, getPersonGroupKey, sum, min, max, randomChoice, randomShuffle, } from './util.js';\r\nclass EntryGenerator {\r\n    constructor(personIds, groupSizes, pairingCountsMap, personOccurrencesMap, groupOccurrencesMap, constraints) {\r\n        this.personIds = personIds;\r\n        this.groupSizes = groupSizes;\r\n        this.pairingCountsMap = pairingCountsMap;\r\n        this.personOccurrencesMap = personOccurrencesMap;\r\n        this.groupOccurrencesMap = groupOccurrencesMap;\r\n        this.constraints = constraints;\r\n        this.remainingPersonIds = new Set(this.personIds);\r\n        this.entry = new Map();\r\n        for (let groupId of this.groupSizes.keys())\r\n            this.entry.set(groupId, new Set());\r\n    }\r\n    generateEntry() {\r\n        for (let constraint of this.constraints) {\r\n            let constraintType = constraint.type;\r\n            let personIds = constraint.personIds;\r\n            if (constraintType == 'apart')\r\n                this.satisfyApartConstraint(personIds);\r\n            else if (constraintType == 'together') {\r\n                let constraintKeys = Object.keys(constraint);\r\n                let mandatoryGroup = null;\r\n                let forbiddenGroups = null;\r\n                if (constraintKeys.includes('mandatoryGroup'))\r\n                    mandatoryGroup = constraint.mandatoryGroup;\r\n                if (constraintKeys.includes('forbiddenGroups'))\r\n                    forbiddenGroups = constraint.forbiddenGroups;\r\n                this.satisfyTogetherConstraint(personIds, mandatoryGroup, forbiddenGroups);\r\n            }\r\n        }\r\n        this.insertCouplesWithLeastOccurrences();\r\n        this.insertRemainingPersons();\r\n        return this.entry;\r\n    }\r\n    satisfyApartConstraint(personIds) {\r\n        let sortedPersonIds = randomShuffle(Array.from(personIds));\r\n        sortedPersonIds.sort((person1Id, person2Id) => this.pairingCountsMap.get(person1Id) - this.pairingCountsMap.get(person2Id));\r\n        let availableGroupIds = new Set(Array.from(this.entry.keys()).filter(groupId => this.entry.get(groupId).size < this.groupSizes.get(groupId)));\r\n        let priorityGroupIds = new Set(Array.from(availableGroupIds).filter(groupId => this.entry.get(groupId).size > 0));\r\n        for (let personId of sortedPersonIds) {\r\n            let groupId = this.getGroupId(personId);\r\n            if (groupId == null) {\r\n                if (priorityGroupIds.size > 0) {\r\n                    let bestGroupIds = this.getBestGroupIdsByPersonOccurrences(new Set([personId]), priorityGroupIds);\r\n                    if (bestGroupIds.size > 1)\r\n                        bestGroupIds = this.getBestGroupIdsByGroupOccurrences(new Set([personId]), bestGroupIds);\r\n                    groupId = randomChoice(Array.from(bestGroupIds));\r\n                    priorityGroupIds.delete(groupId);\r\n                }\r\n                else {\r\n                    let bestGroupIds = this.getBestGroupIdsByGroupOccurrences(new Set([personId]), availableGroupIds);\r\n                    groupId = randomChoice(Array.from(bestGroupIds));\r\n                }\r\n                this.entry.get(groupId).add(personId);\r\n                this.remainingPersonIds.delete(personId);\r\n            }\r\n            availableGroupIds.delete(groupId);\r\n        }\r\n    }\r\n    satisfyTogetherConstraint(personIds, mandatoryGroupId = null, forbiddenGroupIds = null) {\r\n        let sortedPersonIds = randomShuffle(Array.from(personIds));\r\n        sortedPersonIds.sort((person1Id, person2Id) => this.pairingCountsMap.get(person1Id) - this.pairingCountsMap.get(person2Id));\r\n        let alreadyUsedGroupIds = new Set();\r\n        let notInsertedPersonIds = [];\r\n        for (let personId of sortedPersonIds) {\r\n            let groupId = this.getGroupId(personId);\r\n            if (groupId != null)\r\n                alreadyUsedGroupIds.add(groupId);\r\n            else\r\n                notInsertedPersonIds.push(personId);\r\n        }\r\n        if (alreadyUsedGroupIds.size > 0) {\r\n            for (let personId of notInsertedPersonIds) {\r\n                let bestGroupIds = this.getBestGroupIdsByPersonOccurrences(new Set([personId]), alreadyUsedGroupIds);\r\n                if (bestGroupIds) {\r\n                    if (bestGroupIds.size > 1)\r\n                        bestGroupIds = this.getBestGroupIdsByGroupOccurrences(new Set([personId]), bestGroupIds);\r\n                    let groupId = randomChoice(Array.from(bestGroupIds));\r\n                    this.entry.get(groupId).add(personId);\r\n                    this.remainingPersonIds.delete(personId);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (mandatoryGroupId != null) {\r\n                for (let personId of sortedPersonIds) {\r\n                    if (this.entry.get(mandatoryGroupId).size < this.groupSizes.get(mandatoryGroupId)) {\r\n                        this.entry.get(mandatoryGroupId).add(personId);\r\n                        this.remainingPersonIds.delete(personId);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                let candidateGroupIds = new Set(this.groupSizes.keys());\r\n                if (forbiddenGroupIds != null)\r\n                    candidateGroupIds = new Set(Array.from(candidateGroupIds).filter((groupId) => !forbiddenGroupIds.has(groupId)));\r\n                let bestGroupIds = new Set();\r\n                while (bestGroupIds.size == 0) {\r\n                    bestGroupIds = this.getBestGroupIdsByPersonOccurrences(new Set(sortedPersonIds), candidateGroupIds);\r\n                    if (bestGroupIds.size == 0) {\r\n                        bestGroupIds = this.getBestGroupIdsByGroupOccurrences(new Set(sortedPersonIds), candidateGroupIds);\r\n                        if (bestGroupIds.size == 0)\r\n                            sortedPersonIds.pop();\r\n                    }\r\n                    else if (bestGroupIds.size > 1) {\r\n                        bestGroupIds = this.getBestGroupIdsByGroupOccurrences(bestGroupIds, candidateGroupIds);\r\n                    }\r\n                }\r\n                let groupId = randomChoice(Array.from(bestGroupIds));\r\n                let personIds = new Set(sortedPersonIds);\r\n                personIds.forEach(personId => this.entry.get(groupId).add(personId));\r\n                this.remainingPersonIds = new Set(Array.from(this.remainingPersonIds).filter((personId) => !personIds.has(personId)));\r\n            }\r\n        }\r\n    }\r\n    insertCouplesWithLeastOccurrences() {\r\n        let sortedPersonOccurrences = randomShuffle(Array.from(this.personOccurrencesMap.values()));\r\n        sortedPersonOccurrences.sort((occurrence1, occurrence2) => {\r\n            if (occurrence1.count < occurrence2.count)\r\n                return -1;\r\n            if (occurrence1.count > occurrence2.count)\r\n                return 1;\r\n            let min1 = Math.min(this.pairingCountsMap.get(occurrence1.person1Id), this.pairingCountsMap.get(occurrence1.person2Id));\r\n            let min2 = Math.min(this.pairingCountsMap.get(occurrence2.person1Id), this.pairingCountsMap.get(occurrence2.person2Id));\r\n            return min1 - min2;\r\n        });\r\n        let emptyGroupIds = new Set(Array.from(this.groupSizes.keys()).filter(groupId => this.entry.get(groupId).size == 0));\r\n        while (this.remainingPersonIds.size >= 2) {\r\n            let personOccurrence = sortedPersonOccurrences.shift();\r\n            let { person1Id, person2Id } = personOccurrence;\r\n            if (!this.remainingPersonIds.has(person1Id) && !this.remainingPersonIds.has(person2Id)) {\r\n                let personIds = new Set([person1Id, person2Id]);\r\n                let bestGroupIds = this.getBestGroupIdsByGroupOccurrences(personIds, emptyGroupIds);\r\n                if (bestGroupIds.size == 0)\r\n                    return;\r\n                let groupId = randomChoice(Array.from(bestGroupIds));\r\n                personIds.forEach(personId => this.entry.get(groupId).add(personId));\r\n                this.remainingPersonIds.delete(person1Id);\r\n                this.remainingPersonIds.delete(person2Id);\r\n                emptyGroupIds.delete(groupId);\r\n            }\r\n        }\r\n    }\r\n    insertRemainingPersons() {\r\n        let sortedRemainingPersonIds = randomShuffle(Array.from(this.remainingPersonIds));\r\n        sortedRemainingPersonIds.sort((person1Id, person2Id) => this.pairingCountsMap.get(person1Id) - this.pairingCountsMap.get(person2Id));\r\n        while (sortedRemainingPersonIds.length > 0) {\r\n            let personId = sortedRemainingPersonIds.shift();\r\n            let bestGroupIds = this.getBestGroupIdsByPersonOccurrences(new Set([personId]));\r\n            if (bestGroupIds.size > 1)\r\n                bestGroupIds = this.getBestGroupIdsByGroupOccurrences(new Set([personId]), bestGroupIds);\r\n            let groupId = randomChoice(Array.from(bestGroupIds));\r\n            this.entry.get(groupId).add(personId);\r\n        }\r\n        while (sortedRemainingPersonIds.length > 0) {\r\n            let personId = sortedRemainingPersonIds.shift();\r\n            let bestGroupIds = this.getBestGroupIdsByGroupOccurrences(new Set([personId]));\r\n            let groupId = randomChoice(Array.from(bestGroupIds));\r\n            this.entry.get(groupId).add(personId);\r\n        }\r\n    }\r\n    getGroupId(personId) {\r\n        for (let [groupId, group] of this.entry.entries())\r\n            if (group.has(personId))\r\n                return groupId;\r\n        return null;\r\n    }\r\n    getBestGroupIdsByPersonOccurrences(personIds, candidateGroupIds = null) {\r\n        let allGroupIds = new Set(this.groupSizes.keys());\r\n        if (candidateGroupIds == null || Array.from(candidateGroupIds).some(groupId => !allGroupIds.has(groupId)))\r\n            candidateGroupIds = allGroupIds;\r\n        candidateGroupIds = new Set(Array.from(candidateGroupIds).filter((groupId) => this.entry.get(groupId).size > 0 &&\r\n            this.entry.get(groupId).size + personIds.size <= this.groupSizes.get(groupId)));\r\n        if (candidateGroupIds.size == 0)\r\n            return new Set();\r\n        let personOccurrencesForSubgroup = new Map();\r\n        for (let groupId of candidateGroupIds) {\r\n            personOccurrencesForSubgroup.set(groupId, []);\r\n            for (let person1Id of personIds) {\r\n                for (let person2Id of this.entry.get(groupId)) {\r\n                    let key = getPersonPersonKey(person1Id, person2Id);\r\n                    let personOccurrence = this.personOccurrencesMap.get(key).count;\r\n                    personOccurrencesForSubgroup.get(groupId).push(personOccurrence);\r\n                }\r\n            }\r\n        }\r\n        let minPersonOccurrencesAverage = min(Array.from(candidateGroupIds).map((groupId) => sum(personOccurrencesForSubgroup.get(groupId)) /\r\n            personOccurrencesForSubgroup.get(groupId).length));\r\n        candidateGroupIds = new Set(Array.from(candidateGroupIds).filter(groupId => sum(personOccurrencesForSubgroup.get(groupId)) /\r\n            personOccurrencesForSubgroup.get(groupId).length\r\n            == minPersonOccurrencesAverage));\r\n        let maxGroupSize = max(Array.from(candidateGroupIds).map((groupId) => this.groupSizes.get(groupId)));\r\n        candidateGroupIds = new Set(Array.from(candidateGroupIds).filter((groupId) => this.groupSizes.get(groupId) == maxGroupSize));\r\n        return candidateGroupIds;\r\n    }\r\n    getBestGroupIdsByGroupOccurrences(personIds, candidateGroupIds = null) {\r\n        let allGroupIds = new Set(this.groupSizes.keys());\r\n        if (candidateGroupIds == null || Array.from(candidateGroupIds).some(groupId => !allGroupIds.has(groupId)))\r\n            candidateGroupIds = allGroupIds;\r\n        candidateGroupIds = new Set(Array.from(candidateGroupIds).filter((groupId) => this.entry.get(groupId).size + personIds.size <= this.groupSizes.get(groupId)));\r\n        if (candidateGroupIds.size == 0)\r\n            return new Set();\r\n        let groupOccurrencesForSubgroup = new Map();\r\n        for (let groupId of candidateGroupIds) {\r\n            groupOccurrencesForSubgroup.set(groupId, []);\r\n            for (let personId of personIds) {\r\n                let key = getPersonGroupKey(personId, groupId);\r\n                let groupOccurrence = this.groupOccurrencesMap.get(key).count;\r\n                groupOccurrencesForSubgroup.get(groupId).push(groupOccurrence);\r\n            }\r\n        }\r\n        let minGroupOccurrencesAverage = min(Array.from(candidateGroupIds).map((groupId) => sum(groupOccurrencesForSubgroup.get(groupId)) / groupOccurrencesForSubgroup.get(groupId).length));\r\n        candidateGroupIds = new Set(Array.from(candidateGroupIds).filter((groupId) => sum(groupOccurrencesForSubgroup.get(groupId)) / groupOccurrencesForSubgroup.get(groupId).length\r\n            == minGroupOccurrencesAverage));\r\n        let maxGroupSize = max(Array.from(candidateGroupIds).map((groupId) => this.groupSizes.get(groupId)));\r\n        candidateGroupIds = new Set(Array.from(candidateGroupIds).filter((groupId) => this.groupSizes.get(groupId) == maxGroupSize));\r\n        return candidateGroupIds;\r\n    }\r\n}\r\nexport default EntryGenerator;\r\n//# sourceMappingURL=EntryGenerator.js.map","import { getPersonPersonKey, getPersonGroupKey, sum, all, assert, } from './util.js';\r\nimport EntryGenerator from './EntryGenerator.js';\r\nclass MemoMix {\r\n    constructor(personIds, groupSizes, history = null, constraints = null) {\r\n        if (!history)\r\n            history = [];\r\n        if (!constraints)\r\n            constraints = [];\r\n        this.checkPositiveGroupSizes(groupSizes);\r\n        this.checkSufficientGroupSizes(personIds, groupSizes);\r\n        for (let entry of history)\r\n            this.checkEntryValidity(entry);\r\n        this.personIds = personIds;\r\n        this.groupSizes = groupSizes;\r\n        this.history = history;\r\n        this.checkConstraintsValidity(constraints);\r\n        this.constraints = constraints;\r\n    }\r\n    getOccurrencesMaps() {\r\n        let pairingCountsMap = new Map();\r\n        let personOccurrencesMap = new Map();\r\n        let groupOccurrencesMap = new Map();\r\n        let personIdsArray = Array.from(this.personIds);\r\n        for (let [idx, person1Id] of personIdsArray.entries()) {\r\n            pairingCountsMap.set(person1Id, 0);\r\n            for (let person2Id of personIdsArray.slice(idx + 1)) {\r\n                if (person1Id != person2Id) {\r\n                    let key = getPersonPersonKey(person1Id, person2Id);\r\n                    personOccurrencesMap.set(key, {\r\n                        person1Id: person1Id,\r\n                        person2Id: person2Id,\r\n                        count: 0\r\n                    });\r\n                }\r\n            }\r\n            for (let groupId of this.groupSizes.keys()) {\r\n                let key = getPersonGroupKey(person1Id, groupId);\r\n                groupOccurrencesMap.set(key, {\r\n                    personId: person1Id,\r\n                    groupId: groupId,\r\n                    count: 0\r\n                });\r\n            }\r\n        }\r\n        for (let entry of this.history) {\r\n            for (let [groupId, group] of entry.entries()) {\r\n                let groupArray = Array.from(group);\r\n                for (let [idx, person1Id] of groupArray.entries()) {\r\n                    let newPairingCount = pairingCountsMap.get(person1Id) + group.size - 1;\r\n                    pairingCountsMap.set(person1Id, newPairingCount);\r\n                    for (let person2Id of groupArray.slice(idx + 1)) {\r\n                        if (this.personIds.has(person1Id) && this.personIds.has(person2Id)) {\r\n                            let key = getPersonPersonKey(person1Id, person2Id);\r\n                            personOccurrencesMap.get(key).count++;\r\n                        }\r\n                    }\r\n                    let key = getPersonGroupKey(person1Id, groupId);\r\n                    groupOccurrencesMap.get(key).count++;\r\n                }\r\n            }\r\n        }\r\n        return [pairingCountsMap, personOccurrencesMap, groupOccurrencesMap];\r\n    }\r\n    getNewEntry() {\r\n        let [pairingCountsMap, personOccurrencesMap, groupOccurrencesMap] = this.getOccurrencesMaps();\r\n        let generator = new EntryGenerator(this.personIds, this.groupSizes, pairingCountsMap, personOccurrencesMap, groupOccurrencesMap, this.constraints);\r\n        return generator.generateEntry();\r\n    }\r\n    checkPositiveGroupSizes(groupSizes) {\r\n        assert(all(Array.from(groupSizes.values()), size => size >= 1), 'At least one group has a negative or null size.');\r\n    }\r\n    checkSufficientGroupSizes(personIds = null, groupSizes = null) {\r\n        if (personIds == null)\r\n            personIds = this.personIds;\r\n        if (groupSizes == null)\r\n            groupSizes = this.groupSizes;\r\n        assert(personIds.size <= sum(Array.from(groupSizes.values())), 'The groups cannot contain all the persons.');\r\n    }\r\n    checkEntryValidity(entry) {\r\n        let personIds = new Set();\r\n        for (let group of entry.values()) {\r\n            for (let personId of group) {\r\n                if (personIds.has(personId))\r\n                    return false;\r\n                personIds.add(personId);\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    checkConstraintsValidity(constraints) {\r\n        let groupIds = new Set(this.groupSizes.keys());\r\n        constraints.forEach((constraint, index) => {\r\n            let constraintKeys = Object.keys(constraint);\r\n            let personIds = constraint.personIds;\r\n            for (let personId of personIds) {\r\n                assert(this.personIds.has(personId), `The person '${personId}' in constraint #'${index}' does not exist.`);\r\n            }\r\n            if (constraintKeys.includes('mandatoryGroup') && constraint.mandatoryGroup != null) {\r\n                let mandatoryGroupId = constraint.mandatoryGroup;\r\n                assert(groupIds.has(mandatoryGroupId), `The mandatory group '${mandatoryGroupId}' in constraint #${index + 1} does not exist.`);\r\n            }\r\n            if (constraintKeys.includes('forbiddenGroups') && constraint.forbiddenGroups != null) {\r\n                let forbiddenGroupIds = constraint.forbiddenGroups;\r\n                for (let forbiddenGroupId of forbiddenGroupIds)\r\n                    assert(groupIds.has(forbiddenGroupId), `The forbidden group '${forbiddenGroupId}' in constraint #${index + 1} does not exist.`);\r\n            }\r\n        });\r\n    }\r\n    setPersonIds(personIds) {\r\n        this.checkSufficientGroupSizes(personIds);\r\n        this.personIds = personIds;\r\n    }\r\n    setGroupSizes(groupSizes) {\r\n        this.checkPositiveGroupSizes(groupSizes);\r\n        this.checkSufficientGroupSizes(null, groupSizes);\r\n        this.groupSizes = groupSizes;\r\n    }\r\n    setConstraints(constraints) {\r\n        this.checkConstraintsValidity(constraints);\r\n        this.constraints = constraints;\r\n    }\r\n    saveEntry(entry) {\r\n        this.checkEntryValidity(entry);\r\n        this.history.push(entry);\r\n    }\r\n}\r\nexport default MemoMix;\r\n//# sourceMappingURL=MemoMix.js.map","<template>\r\n  <div>\r\n    <entry-modal v-model=\"showEntryModal\" :remaining-persons=\"remainingPersons\"\r\n      :old-entry-group=\"activeEntryGroup\" @entry-group-to-update=\"updateEntryGroup\"\r\n    />\r\n    <save-entry-modal v-model=\"showSaveEntryModal\" :remaining-persons=\"remainingPersons\"\r\n      @entry-to-save=\"saveEntry\"\r\n    />\r\n    <div class=\"sticky-top bg-light d-inline-block w-100\">\r\n      <span class=\"float-left h5\">Proposition</span>\r\n      <span class=\"float-right\">\r\n        <button @click=\"showSaveEntryModal = true\" v-if=\"entry.groups.length > 0\"\r\n          :class=\"'btn btn-link btn-sm ' + (saveEntryBtnHover ? 'text-success' : 'text-body')\"\r\n          v-b-hover=\"hover => saveEntryBtnHover = hover\"\r\n        >\r\n          Sauvegarder <b-icon-check-circle />\r\n        </button>\r\n        <button @click=\"generateEntry\"\r\n          :class=\"'btn btn-link btn-sm ' + (generateEntryBtnHover ? 'text-primary' : 'text-body')\"\r\n          v-b-hover=\"hover => generateEntryBtnHover = hover\"\r\n        >\r\n          Générer <b-icon-play-circle />\r\n        </button>\r\n      </span>\r\n    </div>\r\n    <b-table small striped hover :fields=\"entryFields\" :items=\"entry.groups\"\r\n      @row-hovered=\"(_, index) => entryGroupRowHoverIndex = index\"\r\n      @row-unhovered=\"(_, index) => entryGroupRowHoverIndex = -1\"\r\n    >\r\n      <template #cell(personIds)=\"data\">\r\n        {{ data.item.persons.map(item => item.personId).join(', ') }}  \r\n      </template>\r\n\r\n      <template #cell(updateBtn)=\"data\">\r\n        <div class=\"float-right\">\r\n          <button @click=\"openEntryModal(data.index)\"\r\n            v-b-hover=\"hover => updateEntryGroupBtnHover = hover\"\r\n            :class=\"'btn btn-link btn-sm' +\r\n              (updateEntryGroupBtnHover ? ' text-success' : ' text-body') +\r\n              (entryGroupRowHoverIndex == data.index ? ' visible' : ' invisible')\r\n            \"\r\n          >\r\n            <b-icon-pencil />\r\n          </button>\r\n        </div>\r\n      </template>\r\n    </b-table>\r\n\r\n    <p v-if=\"remainingPersons.length >= 1\">\r\n      <span class=\"font-italic font-weight-bold\">Personnes restantes :</span>\r\n      {{ remainingPersons.map(person => person.personId).join(', ') }}\r\n    </p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  BTable,\r\n  BIconCheckCircle, BIconPencil, BIconPlayCircle,\r\n} from \"bootstrap-vue\";\r\n\r\nimport EntryModal from './EntryModal.vue';\r\nimport SaveEntryModal from './SaveEntryModal.vue';\r\nimport MemoMix from '../memomix/memomix';\r\n\r\nexport default {\r\n  name: 'EntryPane',\r\n  components: {\r\n    BTable,\r\n    BIconCheckCircle, BIconPencil, BIconPlayCircle,\r\n    EntryModal, SaveEntryModal\r\n  },\r\n  props: {\r\n    groups: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    persons: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    constraints: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    history: {\r\n      type: Array,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      entry: {\r\n        title: null,\r\n        groups: []\r\n      },\r\n      entryFields: [\r\n        { key: 'groupId', label: 'Groupe' },\r\n        { key: 'personIds', label: 'Personnes' },\r\n        { key: 'updateBtn', label: '' },\r\n      ],\r\n      remainingPersons: [],\r\n      generateEntryBtnHover: false,\r\n      saveEntryBtnHover: false,\r\n      updateEntryGroupBtnHover: false,\r\n      entryGroupRowHoverIndex: -1,\r\n      activeIndex: -1,\r\n      activeEntryGroup: null,\r\n      showEntryModal: false,\r\n      showSaveEntryModal: false\r\n    };\r\n  },\r\n  methods: {\r\n    generateEntry() {\r\n      let personIds = new Set(this.persons.map(person => person.personId));\r\n      let groupSizes = new Map(this.groups.map(group => [group.groupId, group.size]));\r\n      let formattedHistory = [];\r\n      for (let entry of this.history) {\r\n        let formattedEntry = new Map();\r\n        for (let group of entry.groups)\r\n          formattedEntry.set(group.groupId, new Set(group.persons.map(person => person.personId)));\r\n        formattedHistory.push(formattedEntry);\r\n      }\r\n      let formattedConstraints = [];\r\n      for (let constraint of this.constraints) {\r\n        let constraintKeys = Object.keys(constraint);\r\n        let formattedConstraint = {\r\n          type: constraint.type,\r\n          personIds: new Set(constraint.persons.map(person => person.personId))\r\n        };\r\n        if (constraintKeys.includes('mandatoryGroup'))\r\n          formattedConstraint.mandatoryGroup = constraint.mandatoryGroup;\r\n        if (constraintKeys.includes('forbiddenGroups'))\r\n          formattedConstraint.forbiddenGroups = new Set(\r\n            constraint.forbiddenGroups.map(forbiddenGroup => forbiddenGroup.groupId)\r\n          );\r\n        formattedConstraints.push(formattedConstraint);\r\n      }\r\n      let memomix = new MemoMix(personIds, groupSizes, formattedHistory, formattedConstraints);\r\n      let entryMap = memomix.getNewEntry();\r\n      this.entry = {\r\n        title: null,\r\n        groups: []\r\n      };\r\n      for (let [groupId, personIdsSet] of entryMap)\r\n        this.entry.groups.push({\r\n          groupId: groupId,\r\n          persons: Array.from(personIdsSet).map(personId => ({ personId: personId }))\r\n        });\r\n      this.remainingPersons = [];\r\n    },\r\n    saveEntry(entryTitle) {\r\n      this.entry.title = entryTitle;\r\n      this.$emit('entry-to-save', this.entry);\r\n      this.entry = {\r\n        title: null,\r\n        groups: []\r\n      };\r\n      this.remainingPersons = [];\r\n    },\r\n    openEntryModal(index) {\r\n      this.activeIndex = index;\r\n      this.activeEntryGroup = this.entry.groups[index];\r\n      this.showEntryModal = true;\r\n    },\r\n    updateEntryGroup(entryGroup, remainingPersons) {\r\n      this.entry.groups.splice(this.activeIndex, 1, entryGroup);\r\n      this.remainingPersons = remainingPersons;\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EntryPane.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EntryPane.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EntryPane.vue?vue&type=template&id=0cbf4208&\"\nimport script from \"./EntryPane.vue?vue&type=script&lang=js&\"\nexport * from \"./EntryPane.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._m(0),_c('div',{staticClass:\"accordion\",attrs:{\"role\":\"tablist\"}},_vm._l((_vm.history),function(entry,index){return _c('b-card',{key:index,staticClass:\"mb-1\",attrs:{\"no-body\":\"\"}},[_c('b-card-header',{staticClass:\"p-1\",attrs:{\"header-tag\":\"header\",\"role\":\"tab\"}},[_c('b-button',{directives:[{name:\"b-toggle\",rawName:\"v-b-toggle\",value:('entry' + index),expression:\"'entry' + index\"}],staticClass:\"text-body\",attrs:{\"block\":\"\",\"variant\":\"link\"}},[_vm._v(\" \"+_vm._s(entry.title)+\" \")])],1),_c('b-collapse',{attrs:{\"id\":'entry' + index,\"accordion\":\"historyAccordion\",\"role\":\"tabpanel\"}},[_c('b-table',{attrs:{\"small\":\"\",\"striped\":\"\",\"hover\":\"\",\"fields\":_vm.entryFields,\"items\":entry.groups},on:{\"row-hovered\":function (_, index) { return _vm.entryGroupRowHoverIndex = index; },\"row-unhovered\":function (_, index) { return _vm.entryGroupRowHoverIndex = -1; }},scopedSlots:_vm._u([{key:\"cell(personIds)\",fn:function(data){return [_vm._v(\" \"+_vm._s(data.item.persons.map(function (item) { return item.personId; }).join(', '))+\" \")]}}],null,true)}),_c('button',{directives:[{name:\"b-hover\",rawName:\"v-b-hover\",value:(function (hover) { return _vm.removeEntryBtnHover = hover; }),expression:\"hover => removeEntryBtnHover = hover\"}],class:'btn btn-link btn-sm ' + (_vm.removeEntryBtnHover ? 'text-danger' : 'text-body'),on:{\"click\":function($event){return _vm.removeEntry(index)}}},[_vm._v(\" Supprimer l'entrée \"),_c('b-icon-x-circle')],1)],1)],1)}),1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"sticky-top bg-light d-inline-block w-100\"},[_c('span',{staticClass:\"float-left h5\"},[_vm._v(\"Historique\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div class=\"sticky-top bg-light d-inline-block w-100\">\r\n      <span class=\"float-left h5\">Historique</span>\r\n    </div>\r\n    <div class=\"accordion\" role=\"tablist\">\r\n      <b-card no-body class=\"mb-1\" v-for=\"(entry, index) in history\" :key=\"index\">\r\n        <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n          <b-button block v-b-toggle=\"'entry' + index\" variant=\"link\" class=\"text-body\">\r\n            {{ entry.title }}\r\n          </b-button>\r\n        </b-card-header>\r\n        <b-collapse :id=\"'entry' + index\" accordion=\"historyAccordion\" role=\"tabpanel\">\r\n          <b-table small striped hover :fields=\"entryFields\" :items=\"entry.groups\"\r\n            @row-hovered=\"(_, index) => entryGroupRowHoverIndex = index\"\r\n            @row-unhovered=\"(_, index) => entryGroupRowHoverIndex = -1\"\r\n          >\r\n            <template #cell(personIds)=\"data\">\r\n              {{ data.item.persons.map(item => item.personId).join(', ') }}  \r\n            </template>\r\n          </b-table>\r\n          <button @click=\"removeEntry(index)\"\r\n            :class=\"'btn btn-link btn-sm ' + (removeEntryBtnHover ? 'text-danger' : 'text-body')\"\r\n            v-b-hover=\"hover => removeEntryBtnHover = hover\"\r\n          >\r\n            Supprimer l'entrée <b-icon-x-circle />\r\n          </button>\r\n        </b-collapse>\r\n      </b-card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  BTable, BButton, BCollapse, BCard, BCardHeader,\r\n  BIconXCircle\r\n} from \"bootstrap-vue\";\r\n\r\nexport default {\r\n  name: 'HistoryPane',\r\n  components: {\r\n    BTable, BButton, BCollapse, BCard, BCardHeader,\r\n    BIconXCircle\r\n  },\r\n  props: {\r\n    history: {\r\n      type: Array,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      entryFields: [\r\n        { key: 'groupId', label: 'Groupe' },\r\n        { key: 'personIds', label: 'Personnes' }\r\n      ],\r\n      removeEntryBtnHover: false,\r\n      activeEntry: null,\r\n      activeEntryGroup: null,\r\n      showEntryModal: false\r\n    };\r\n  },\r\n  methods: {\r\n    removeEntry(index) {\r\n      this.$emit('entry-to-remove', index);\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HistoryPane.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HistoryPane.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HistoryPane.vue?vue&type=template&id=c8cc0efa&\"\nimport script from \"./HistoryPane.vue?vue&type=script&lang=js&\"\nexport * from \"./HistoryPane.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <splitpanes class=\"default-theme\" style=\"height: 100vh\" horizontal>\n      <pane class=\"horizontalPane\">\n        <splitpanes vertical>\n          <pane>\n            <group-pane :groups=\"groups\" @group-to-update=\"updateGroup\"\n              @group-to-add=\"addGroup\" @group-to-remove=\"removeGroup\"\n            />\n          </pane>\n\n          <pane>\n            <person-pane :persons=\"persons\" @person-to-update=\"updatePerson\"\n              @person-to-add=\"addPerson\" @person-to-remove=\"removePerson\"\n            />\n          </pane>\n\n          <pane>\n            <constraint-pane :constraints=\"constraints\" :persons=\"persons\" :groups=\"groups\"\n              @constraint-to-update=\"updateConstraint\" @constraint-to-add=\"addConstraint\"\n              @constraint-to-remove=\"removeConstraint\"\n            />\n          </pane>\n        </splitpanes>\n      </pane>\n\n      <pane class=\"horizontalPane\">\n        <splitpanes>\n          <pane>\n            <history-pane :history=\"history\" @entry-to-remove=\"removeEntry\" />\n          </pane>\n\n          <pane>\n            <entry-pane :groups=\"groups\" :persons=\"persons\" :constraints=\"constraints\" :history=\"history\"\n              @entry-to-save=\"saveEntry\"\n            />\n          </pane>\n        </splitpanes>\n      </pane>\n    </splitpanes>\n  </div>\n</template>\n\n<script>\nimport { Splitpanes, Pane } from 'splitpanes';\nimport 'splitpanes/dist/splitpanes.css';\n\nimport GroupPane from './components/GroupPane.vue';\nimport PersonPane from './components/PersonPane.vue';\nimport ConstraintPane from './components/ConstraintPane.vue';\nimport EntryPane from './components/EntryPane.vue';\nimport HistoryPane from './components/HistoryPane.vue';\n\nconst storageKeyPrefix = 'MemoMix--';\nconst defaultProject = 'default';\n\nfunction getGroupsKey(project) {\n  return storageKeyPrefix + project + '--Groups';\n}\n\nfunction getPersonsKey(project) {\n  return storageKeyPrefix + project + '--Persons';\n}\n\nfunction getConstraintsKey(project) {\n  return storageKeyPrefix + project + '--Constraints';\n}\n\nfunction getHistoryKey(project) {\n  return storageKeyPrefix + project + '--History';\n}\n\nfunction getCurrentProjectKey() {\n  return storageKeyPrefix + 'CurrentProject';\n}\n\nfunction getProjectsKey() {\n  return storageKeyPrefix + 'Projects';\n}\n\nexport default {\n  name: 'App',\n  components: {\n    Splitpanes, Pane,\n    GroupPane, PersonPane, ConstraintPane, EntryPane, HistoryPane\n  },\n  data() {\n    return {\n      currentProject: null,\n      projects: [],\n      groups: [],\n      persons: [],\n      constraints: [],\n      history: []\n    };\n  },\n  mounted() {\n    this.currentProject = localStorage.getItem(getCurrentProjectKey());\n    if (this.currentProject == null) {\n      this.currentProject = defaultProject;\n      localStorage.setItem(getCurrentProjectKey(), defaultProject);\n      localStorage.setItem(getProjectsKey(), JSON.stringify([defaultProject]));\n      this.saveGroups();\n      this.savePersons();\n      this.saveConstraints();\n      this.saveHistory();\n    } else this.switchProject(this.currentProject);\n  },\n  methods: {\n    updateGroup(index, group, updateHistory) {\n      let oldGroupId = this.groups[index].groupId;\n      let newGroupId = group.groupId;\n      \n      for (let constraint of this.constraints) {\n        if (constraint.inGroup == oldGroupId)\n          constraint.inGroup = newGroupId;\n        let otherGroup = constraint.notInGroups.find(({ groupId }) => groupId == oldGroupId);\n        if (otherGroup)\n          otherGroup.groupId = newGroupId;\n      }\n      this.saveGroups();\n\n      if (updateHistory) {\n        for (let entry of this.history)\n          for (let otherGroup of entry.groups)\n            if (otherGroup.groupId == oldGroupId)\n              otherGroup.groupId = newGroupId;\n        this.saveHistory();\n      }\n\n      this.groups.splice(index, 1, group);\n    },\n    addGroup(group) {\n      this.groups.push(group);\n      this.saveGroups();\n    },\n    removeGroup(index) {\n      this.groups.splice(index, 1);\n      this.saveGroups();\n    },\n    updatePerson(index, person, updateHistory) {\n      let oldPersonId = this.persons[index].personId;\n      let newPersonId = person.personId;\n      for (let constraint of this.constraints) {\n        let otherPerson = constraint.persons.find(({ personId }) => personId == oldPersonId);\n        if (otherPerson)\n          otherPerson.personId = newPersonId;\n      }\n      this.savePersons();\n\n      if (updateHistory) {\n        for (let entry of this.history)\n          for (let group of entry.groups)\n            for (let otherPerson of group.persons)\n              if (otherPerson.personId == oldPersonId)\n                otherPerson.personId = newPersonId;\n        this.saveHistory();\n      }\n\n      this.persons.splice(index, 1, person);\n    },\n    addPerson(person) {\n      this.persons.push(person);\n      this.savePersons();\n    },\n    removePerson(index) {\n      this.persons.splice(index, 1);\n      this.savePersons();\n    },\n    updateConstraint(index, constraint) {\n      this.constraints.splice(index, 1, constraint);\n      this.saveConstraints();\n    },\n    addConstraint(constraint) {\n      this.constraints.push(constraint);\n      this.saveConstraints();\n    },\n    removeConstraint(index) {\n      this.constraints.splice(index, 1);\n      this.saveConstraints();\n    },\n    saveEntry(entry) {\n      this.history.push(entry);\n      this.saveHistory();\n    },\n    removeEntry(index) {\n      this.history.splice(index, 1);\n      this.saveHistory();\n    },\n    switchProject(project) {\n      //TODO more efficient storage (e.g. transform [{personId: 'toto'}, ...] into simply ['toto', ...])\n      this.groups = JSON.parse(localStorage.getItem(getGroupsKey(project)));\n      this.persons = JSON.parse(localStorage.getItem(getPersonsKey(project)));\n      this.constraints = JSON.parse(localStorage.getItem(getConstraintsKey(project)));\n      this.history = JSON.parse(localStorage.getItem(getHistoryKey(project)));\n      this.currentProject = project;\n    },\n    saveGroups() {\n      //TODO more efficient storage\n      localStorage.setItem(getGroupsKey(this.currentProject), JSON.stringify(this.groups));\n    },\n    savePersons() {\n      //TODO more efficient storage\n      localStorage.setItem(getPersonsKey(this.currentProject), JSON.stringify(this.persons));\n    },\n    saveConstraints() {\n      //TODO more efficient storage\n      localStorage.setItem(getConstraintsKey(this.currentProject), JSON.stringify(this.constraints));\n    },\n    saveHistory() {\n      //TODO more efficient storage\n      localStorage.setItem(getHistoryKey(this.currentProject), JSON.stringify(this.history));\n    }\n  }\n};\n</script>\n\n<style>\n.splitpanes__pane {\n  overflow-y: scroll;\n}\n\n.horizontalPane {\n  overflow-y: hidden;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=6c38dd34&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport { VBHover, VBToggle } from 'bootstrap-vue';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'bootstrap-vue/dist/bootstrap-vue.css';\n\nimport App from './App.vue';\n\nVue.directive('b-hover', VBHover);\nVue.directive('b-toggle', VBToggle);\n\nnew Vue({\n  el: '#app',\n  render: h => h(App)\n});\n"],"sourceRoot":""}